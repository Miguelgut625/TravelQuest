{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport Map from \"../../components/maps/index\";\nimport * as Location from 'expo-location';\nimport { useNavigation } from '@react-navigation/native';\nimport generateMission from \"../../services/missionGenerator\";\nimport { Ionicons } from '@expo/vector-icons';\nimport DatePicker from 'react-datepicker';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport \"../../styles/datepicker.css\";\nimport { searchCities } from \"../../services/supabase\";\nimport { format } from 'date-fns';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar _Dimensions$get = Dimensions.get('window'),\n  width = _Dimensions$get.width,\n  height = _Dimensions$get.height;\nvar LoadingModal = function LoadingModal(_ref) {\n  var visible = _ref.visible,\n    currentStep = _ref.currentStep;\n  return _jsx(Modal, {\n    transparent: true,\n    visible: visible,\n    animationType: \"fade\",\n    children: _jsx(View, {\n      style: styles.modalContainer,\n      children: _jsxs(View, {\n        style: styles.loadingCard,\n        children: [_jsx(ActivityIndicator, {\n          size: \"large\",\n          color: \"#4CAF50\"\n        }), _jsx(Text, {\n          style: styles.loadingTitle,\n          children: \"Generando tu aventura\"\n        }), _jsx(Text, {\n          style: styles.loadingStep,\n          children: currentStep\n        })]\n      })\n    })\n  });\n};\nvar DateRangePickerWeb = function DateRangePickerWeb(_ref2) {\n  var startDate = _ref2.startDate,\n    endDate = _ref2.endDate,\n    onDatesChange = _ref2.onDatesChange;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isOpen = _useState2[0],\n    setIsOpen = _useState2[1];\n  var handleChange = function handleChange(update) {\n    onDatesChange(update);\n    if (update[0] && update[1]) {\n      setIsOpen(false);\n    }\n  };\n  var formatDateRange = function formatDateRange() {\n    if (!startDate && !endDate) return \"Selecciona las fechas\";\n    if (!endDate) return format(startDate, \"dd MMM yyyy\");\n    return `${format(startDate, \"dd MMM\")} - ${format(endDate, \"dd MMM yyyy\")}`;\n  };\n  return _jsxs(\"div\", {\n    style: {\n      width: '100%',\n      position: 'relative',\n      zIndex: 1000,\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      padding: '20px',\n      backgroundColor: 'white',\n      borderRadius: '8px',\n      boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n    },\n    children: [_jsxs(\"div\", {\n      style: {\n        flex: 1,\n        paddingRight: '20px'\n      },\n      children: [_jsx(Text, {\n        style: {\n          fontSize: '16px',\n          fontWeight: 'bold',\n          marginBottom: '8px',\n          color: '#333'\n        },\n        children: \"Elige las fechas de tu viaje\"\n      }), _jsxs(TouchableOpacity, {\n        onPress: function onPress() {\n          return setIsOpen(!isOpen);\n        },\n        style: {\n          flexDirection: 'row',\n          alignItems: 'center',\n          padding: '12px',\n          borderRadius: '4px',\n          backgroundColor: '#f5f5f5'\n        },\n        children: [_jsx(Ionicons, {\n          name: \"calendar-outline\",\n          size: 24,\n          color: \"#666\"\n        }), _jsx(Text, {\n          style: {\n            marginLeft: '8px',\n            fontSize: '14px',\n            color: '#333'\n          },\n          children: formatDateRange()\n        })]\n      })]\n    }), isOpen && _jsx(\"div\", {\n      style: {\n        position: 'absolute',\n        top: '100%',\n        right: 0,\n        zIndex: 1001,\n        backgroundColor: 'white',\n        borderRadius: '8px',\n        boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n        padding: '16px'\n      },\n      children: _jsx(DatePicker, {\n        selected: startDate,\n        onChange: handleChange,\n        startDate: startDate,\n        endDate: endDate,\n        selectsRange: true,\n        inline: true,\n        monthsShown: 2,\n        minDate: new Date(),\n        calendarClassName: \"booking-calendar\",\n        dateFormat: \"dd/MM/yyyy\"\n      })\n    })]\n  });\n};\nvar MapScreen = function MapScreen() {\n  var navigation = useNavigation();\n  var dispatch = useDispatch();\n  var _useSelector = useSelector(function (state) {\n      return state.auth;\n    }),\n    user = _useSelector.user;\n  var _useState3 = useState({\n      latitude: 38.3452,\n      longitude: -0.4815,\n      latitudeDelta: 0.0922,\n      longitudeDelta: 0.0421\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    region = _useState4[0],\n    setRegion = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    userLocation = _useState6[0],\n    setUserLocation = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    searchCity = _useState8[0],\n    setSearchCity = _useState8[1];\n  var _useState9 = useState(''),\n    _useState10 = _slicedToArray(_useState9, 2),\n    missionCount = _useState10[0],\n    setMissionCount = _useState10[1];\n  var _useState11 = useState(new Date()),\n    _useState12 = _slicedToArray(_useState11, 2),\n    startDate = _useState12[0],\n    setStartDate = _useState12[1];\n  var _useState13 = useState(new Date()),\n    _useState14 = _slicedToArray(_useState13, 2),\n    endDate = _useState14[0],\n    setEndDate = _useState14[1];\n  var _useState15 = useState(false),\n    _useState16 = _slicedToArray(_useState15, 2),\n    showStartDatePicker = _useState16[0],\n    setShowStartDatePicker = _useState16[1];\n  var _useState17 = useState(false),\n    _useState18 = _slicedToArray(_useState17, 2),\n    showEndDatePicker = _useState18[0],\n    setShowEndDatePicker = _useState18[1];\n  var _useState19 = useState(null),\n    _useState20 = _slicedToArray(_useState19, 2),\n    errorMsg = _useState20[0],\n    setErrorMsg = _useState20[1];\n  var _useState21 = useState(false),\n    _useState22 = _slicedToArray(_useState21, 2),\n    isLoading = _useState22[0],\n    setIsLoading = _useState22[1];\n  var _useState23 = useState(''),\n    _useState24 = _slicedToArray(_useState23, 2),\n    currentStep = _useState24[0],\n    setCurrentStep = _useState24[1];\n  var _useState25 = useState(false),\n    _useState26 = _slicedToArray(_useState25, 2),\n    hasLocationPermission = _useState26[0],\n    setHasLocationPermission = _useState26[1];\n  var _useState27 = useState(true),\n    _useState28 = _slicedToArray(_useState27, 2),\n    isLoadingLocation = _useState28[0],\n    setIsLoadingLocation = _useState28[1];\n  var _useState29 = useState([]),\n    _useState30 = _slicedToArray(_useState29, 2),\n    filteredCities = _useState30[0],\n    setFilteredCities = _useState30[1];\n  var _useState31 = useState(false),\n    _useState32 = _slicedToArray(_useState31, 2),\n    showSuggestions = _useState32[0],\n    setShowSuggestions = _useState32[1];\n  var getLocation = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        setIsLoadingLocation(true);\n        console.log('Solicitando permisos de ubicación...');\n        var _yield$Location$reque = yield Location.requestForegroundPermissionsAsync(),\n          status = _yield$Location$reque.status;\n        console.log('Estado de los permisos:', status);\n        setHasLocationPermission(status === 'granted');\n        if (status !== 'granted') {\n          console.log('Permisos denegados');\n          setErrorMsg('Se requiere permiso para acceder a la ubicación');\n          return;\n        }\n        console.log('Obteniendo ubicación actual...');\n        var location = yield Location.getCurrentPositionAsync({\n          accuracy: Location.Accuracy.Balanced,\n          timeInterval: 5000,\n          mayShowUserSettingsDialog: true\n        });\n        console.log('Ubicación obtenida:', location);\n        var newRegion = {\n          latitude: location.coords.latitude,\n          longitude: location.coords.longitude,\n          latitudeDelta: 0.0922,\n          longitudeDelta: 0.0421\n        };\n        setRegion(newRegion);\n        setUserLocation({\n          latitude: location.coords.latitude,\n          longitude: location.coords.longitude\n        });\n      } catch (error) {\n        console.error('Error obteniendo la ubicación:', error);\n        setErrorMsg('Error al obtener la ubicación. Por favor, verifica que el GPS esté activado.');\n      } finally {\n        setIsLoadingLocation(false);\n      }\n    });\n    return function getLocation() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    getLocation();\n  }, []);\n  var calculateDuration = function calculateDuration(start, end) {\n    var diffTime = Math.abs(end.getTime() - start.getTime());\n    var diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return diffDays;\n  };\n  var handleCitySearch = function () {\n    var _ref4 = _asyncToGenerator(function* (text) {\n      var upperText = text.toUpperCase();\n      setSearchCity(upperText);\n      if (text.length > 2) {\n        try {\n          var cities = yield searchCities(upperText);\n          setFilteredCities(cities);\n          setShowSuggestions(true);\n        } catch (error) {\n          console.error('Error searching cities:', error);\n          setFilteredCities([]);\n        }\n      } else {\n        setFilteredCities([]);\n        setShowSuggestions(false);\n      }\n    });\n    return function handleCitySearch(_x) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var handleCitySelect = function handleCitySelect(city) {\n    setSearchCity(city.name.toUpperCase());\n    setShowSuggestions(false);\n    setRegion({\n      latitude: city.latitude,\n      longitude: city.longitude,\n      latitudeDelta: 0.0922,\n      longitudeDelta: 0.0421\n    });\n  };\n  var handleSearch = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      if (!(user != null && user.id)) {\n        setErrorMsg('Debes iniciar sesión para generar misiones');\n        return;\n      }\n      var missionCountNum = parseInt(missionCount);\n      var duration = calculateDuration(startDate, endDate);\n      var upperSearchCity = searchCity.toUpperCase();\n      if (!upperSearchCity || !missionCountNum) {\n        setErrorMsg('Por favor, completa todos los campos');\n        return;\n      }\n      if (endDate < startDate) {\n        setErrorMsg('La fecha de fin no puede ser anterior a la fecha de inicio');\n        return;\n      }\n      try {\n        setIsLoading(true);\n        setErrorMsg(null);\n        setCurrentStep('Preparando tu viaje a ' + upperSearchCity + '...');\n        yield new Promise(function (resolve) {\n          return setTimeout(resolve, 1000);\n        });\n        setCurrentStep('Buscando lugares interesantes...');\n        yield new Promise(function (resolve) {\n          return setTimeout(resolve, 1500);\n        });\n        setCurrentStep('Creando misiones emocionantes...');\n        var result = yield generateMission(upperSearchCity, duration, missionCountNum, user.id, startDate, endDate);\n        if (!result.journeyId) {\n          throw new Error('No se recibió el ID del journey');\n        }\n        setCurrentStep('¡Todo listo para tu aventura!');\n        yield new Promise(function (resolve) {\n          return setTimeout(resolve, 1000);\n        });\n        navigation.navigate('Missions', {\n          journeyId: result.journeyId,\n          challenges: result.challenges || []\n        });\n      } catch (error) {\n        console.error('Error generando misiones:', error);\n        setErrorMsg('Error al generar las misiones. Por favor, intenta de nuevo.');\n      } finally {\n        setIsLoading(false);\n        setCurrentStep('');\n      }\n    });\n    return function handleSearch() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var handleDatesChange = function handleDatesChange(dates) {\n    var _dates = _slicedToArray(dates, 2),\n      start = _dates[0],\n      end = _dates[1];\n    if (start) setStartDate(start);\n    if (end) setEndDate(end);\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(LoadingModal, {\n      visible: isLoading,\n      currentStep: currentStep\n    }), _jsxs(View, {\n      style: styles.searchContainer,\n      children: [_jsxs(View, {\n        style: styles.searchInputContainer,\n        children: [_jsx(TextInput, {\n          style: styles.input,\n          placeholder: \"Buscar ciudad\",\n          value: searchCity,\n          onChangeText: handleCitySearch,\n          onFocus: function onFocus() {\n            return setShowSuggestions(true);\n          }\n        }), showSuggestions && filteredCities.length > 0 && _jsx(FlatList, {\n          data: filteredCities,\n          keyExtractor: function keyExtractor(item) {\n            return item.id;\n          },\n          renderItem: function renderItem(_ref6) {\n            var item = _ref6.item;\n            return _jsx(TouchableOpacity, {\n              style: styles.suggestionItem,\n              onPress: function onPress() {\n                return handleCitySelect(item);\n              },\n              children: _jsx(Text, {\n                style: styles.suggestionText,\n                children: item.name\n              })\n            });\n          },\n          style: styles.suggestionsList\n        })]\n      }), _jsx(TextInput, {\n        style: styles.input,\n        placeholder: \"N\\xFAmero de misiones\",\n        value: missionCount,\n        onChangeText: setMissionCount,\n        keyboardType: \"numeric\"\n      }), Platform.OS === 'web' ? _jsx(DateRangePickerWeb, {\n        startDate: startDate,\n        endDate: endDate,\n        onDatesChange: handleDatesChange\n      }) : _jsxs(View, {\n        style: styles.datePickersRow,\n        children: [_jsx(TouchableOpacity, {\n          style: [styles.dateButton, {\n            flex: 1,\n            marginRight: 5\n          }],\n          onPress: function onPress() {\n            return setShowStartDatePicker(true);\n          },\n          children: _jsxs(Text, {\n            style: styles.dateButtonText,\n            children: [\"Inicio: \", startDate.toLocaleDateString()]\n          })\n        }), _jsx(TouchableOpacity, {\n          style: [styles.dateButton, {\n            flex: 1,\n            marginLeft: 5\n          }],\n          onPress: function onPress() {\n            return setShowEndDatePicker(true);\n          },\n          children: _jsxs(Text, {\n            style: styles.dateButtonText,\n            children: [\"Fin: \", endDate.toLocaleDateString()]\n          })\n        })]\n      }), (showStartDatePicker || showEndDatePicker) && _jsx(DatePicker, {\n        selected: showStartDatePicker ? startDate : endDate,\n        onChange: function onChange(date) {\n          if (Platform.OS === 'android') {\n            setShowStartDatePicker(false);\n            setShowEndDatePicker(false);\n          }\n          if (date) {\n            if (showStartDatePicker) {\n              setStartDate(date);\n            } else {\n              setEndDate(date);\n            }\n          }\n        },\n        minDate: new Date(),\n        maxDate: new Date(),\n        showTimeSelect: false,\n        dateFormat: \"dd/MM/yyyy\",\n        className: \"booking-calendar\",\n        calendarClassName: \"booking-calendar\"\n      }), _jsxs(Text, {\n        style: styles.durationText,\n        children: [\"Duraci\\xF3n del viaje: \", calculateDuration(startDate, endDate), \" d\\xEDas\"]\n      }), _jsx(TouchableOpacity, {\n        style: [styles.button, isLoading && styles.buttonDisabled],\n        onPress: handleSearch,\n        disabled: isLoading,\n        children: _jsx(Text, {\n          style: styles.buttonText,\n          children: isLoading ? 'Generando...' : 'Buscar Aventuras'\n        })\n      }), errorMsg ? _jsx(Text, {\n        style: styles.errorText,\n        children: errorMsg\n      }) : null]\n    }), _jsxs(View, {\n      style: styles.mapContainer,\n      children: [isLoadingLocation ? _jsxs(View, {\n        style: styles.loadingContainer,\n        children: [_jsx(ActivityIndicator, {\n          size: \"large\",\n          color: \"#4CAF50\"\n        }), _jsx(Text, {\n          style: styles.loadingText,\n          children: \"Obteniendo ubicaci\\xF3n...\"\n        }), errorMsg ? _jsx(TouchableOpacity, {\n          style: styles.retryButton,\n          onPress: getLocation,\n          children: _jsx(Text, {\n            style: styles.retryButtonText,\n            children: \"Reintentar\"\n          })\n        }) : null]\n      }) : _jsx(Map, {\n        region: region,\n        style: styles.map,\n        showsUserLocation: hasLocationPermission,\n        showsMyLocationButton: hasLocationPermission,\n        userLocation: userLocation,\n        onRegionChangeComplete: function onRegionChangeComplete(newRegion) {\n          setRegion(newRegion);\n        }\n      }), errorMsg ? _jsx(View, {\n        style: styles.errorOverlay,\n        children: _jsx(Text, {\n          style: styles.errorText,\n          children: errorMsg\n        })\n      }) : null]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5'\n  },\n  searchContainer: {\n    backgroundColor: 'white',\n    padding: 15,\n    borderBottomLeftRadius: 20,\n    borderBottomRightRadius: 20,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5\n  },\n  mapContainer: {\n    flex: 1,\n    marginTop: 10\n  },\n  map: {\n    width: '100%',\n    height: '100%'\n  },\n  input: {\n    height: 40,\n    borderColor: '#ddd',\n    borderWidth: 1,\n    borderRadius: 5,\n    marginBottom: 10,\n    paddingHorizontal: 10,\n    backgroundColor: 'white'\n  },\n  button: {\n    backgroundColor: '#4CAF50',\n    padding: 15,\n    borderRadius: 5,\n    alignItems: 'center'\n  },\n  buttonDisabled: {\n    backgroundColor: '#cccccc'\n  },\n  buttonText: {\n    color: 'white',\n    fontWeight: 'bold'\n  },\n  errorText: {\n    color: 'red',\n    marginTop: 10,\n    textAlign: 'center'\n  },\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)'\n  },\n  loadingCard: {\n    backgroundColor: 'white',\n    padding: 20,\n    borderRadius: 15,\n    alignItems: 'center',\n    width: '80%',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5\n  },\n  loadingTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n    marginTop: 15,\n    marginBottom: 10\n  },\n  loadingStep: {\n    fontSize: 16,\n    color: '#666',\n    textAlign: 'center',\n    marginTop: 10\n  },\n  datePickersRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 10,\n    backgroundColor: 'white',\n    borderRadius: 8,\n    padding: 15,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 3.84,\n    elevation: 2\n  },\n  datePickerContainer: {\n    flex: 1\n  },\n  dateInputContainer: {\n    width: '100%'\n  },\n  datePickerTitle: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: '#333',\n    marginBottom: 10\n  },\n  dateInput: {\n    width: '100%',\n    height: 40,\n    borderColor: '#ddd',\n    borderWidth: 1,\n    borderRadius: 5,\n    paddingHorizontal: 10,\n    backgroundColor: 'white',\n    fontSize: 16,\n    cursor: 'pointer'\n  },\n  dateButton: {\n    backgroundColor: '#f0f0f0',\n    padding: 10,\n    borderRadius: 5\n  },\n  dateButtonText: {\n    color: '#333',\n    textAlign: 'center'\n  },\n  durationText: {\n    textAlign: 'center',\n    marginBottom: 10,\n    color: '#666',\n    fontSize: 16\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f5f5f5'\n  },\n  loadingText: {\n    marginTop: 10,\n    color: '#666',\n    fontSize: 16\n  },\n  errorOverlay: {\n    position: 'absolute',\n    top: 10,\n    left: 10,\n    right: 10,\n    backgroundColor: 'rgba(244, 67, 54, 0.9)',\n    padding: 10,\n    borderRadius: 5\n  },\n  retryButton: {\n    backgroundColor: '#4CAF50',\n    padding: 10,\n    borderRadius: 5,\n    marginTop: 10\n  },\n  retryButtonText: {\n    color: 'white',\n    textAlign: 'center',\n    fontWeight: 'bold'\n  },\n  searchInputContainer: {\n    position: 'relative',\n    zIndex: 1\n  },\n  suggestionsList: {\n    position: 'absolute',\n    top: '100%',\n    left: 0,\n    right: 0,\n    backgroundColor: 'white',\n    borderRadius: 5,\n    maxHeight: 200,\n    zIndex: 2,\n    elevation: 5,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84\n  },\n  suggestionItem: {\n    padding: 15,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee'\n  },\n  suggestionText: {\n    fontSize: 16,\n    color: '#333'\n  },\n  dateRangeContainer: {\n    backgroundColor: 'white',\n    borderRadius: 8,\n    padding: 15,\n    marginBottom: 15,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 3.84,\n    elevation: 2\n  },\n  datePickerWrapper: {\n    width: '100%'\n  }\n});\nexport default MapScreen;","map":{"version":3,"names":["React","useState","useEffect","View","Text","StyleSheet","TextInput","TouchableOpacity","Dimensions","Platform","ActivityIndicator","Modal","FlatList","useDispatch","useSelector","Map","Location","useNavigation","generateMission","Ionicons","DatePicker","searchCities","format","jsx","_jsx","jsxs","_jsxs","_Dimensions$get","get","width","height","LoadingModal","_ref","visible","currentStep","transparent","animationType","children","style","styles","modalContainer","loadingCard","size","color","loadingTitle","loadingStep","DateRangePickerWeb","_ref2","startDate","endDate","onDatesChange","_useState","_useState2","_slicedToArray","isOpen","setIsOpen","handleChange","update","formatDateRange","position","zIndex","display","flexDirection","alignItems","justifyContent","padding","backgroundColor","borderRadius","boxShadow","flex","paddingRight","fontSize","fontWeight","marginBottom","onPress","name","marginLeft","top","right","selected","onChange","selectsRange","inline","monthsShown","minDate","Date","calendarClassName","dateFormat","MapScreen","navigation","dispatch","_useSelector","state","auth","user","_useState3","latitude","longitude","latitudeDelta","longitudeDelta","_useState4","region","setRegion","_useState5","_useState6","userLocation","setUserLocation","_useState7","_useState8","searchCity","setSearchCity","_useState9","_useState10","missionCount","setMissionCount","_useState11","_useState12","setStartDate","_useState13","_useState14","setEndDate","_useState15","_useState16","showStartDatePicker","setShowStartDatePicker","_useState17","_useState18","showEndDatePicker","setShowEndDatePicker","_useState19","_useState20","errorMsg","setErrorMsg","_useState21","_useState22","isLoading","setIsLoading","_useState23","_useState24","setCurrentStep","_useState25","_useState26","hasLocationPermission","setHasLocationPermission","_useState27","_useState28","isLoadingLocation","setIsLoadingLocation","_useState29","_useState30","filteredCities","setFilteredCities","_useState31","_useState32","showSuggestions","setShowSuggestions","getLocation","_ref3","_asyncToGenerator","console","log","_yield$Location$reque","requestForegroundPermissionsAsync","status","location","getCurrentPositionAsync","accuracy","Accuracy","Balanced","timeInterval","mayShowUserSettingsDialog","newRegion","coords","error","apply","arguments","calculateDuration","start","end","diffTime","Math","abs","getTime","diffDays","ceil","handleCitySearch","_ref4","text","upperText","toUpperCase","length","cities","_x","handleCitySelect","city","handleSearch","_ref5","id","missionCountNum","parseInt","duration","upperSearchCity","Promise","resolve","setTimeout","result","journeyId","Error","navigate","challenges","handleDatesChange","dates","_dates","container","searchContainer","searchInputContainer","input","placeholder","value","onChangeText","onFocus","data","keyExtractor","item","renderItem","_ref6","suggestionItem","suggestionText","suggestionsList","keyboardType","OS","datePickersRow","dateButton","marginRight","dateButtonText","toLocaleDateString","date","maxDate","showTimeSelect","className","durationText","button","buttonDisabled","disabled","buttonText","errorText","mapContainer","loadingContainer","loadingText","retryButton","retryButtonText","map","showsUserLocation","showsMyLocationButton","onRegionChangeComplete","errorOverlay","create","borderBottomLeftRadius","borderBottomRightRadius","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","marginTop","borderColor","borderWidth","paddingHorizontal","textAlign","datePickerContainer","dateInputContainer","datePickerTitle","dateInput","cursor","left","maxHeight","borderBottomWidth","borderBottomColor","dateRangeContainer","datePickerWrapper"],"sources":["C:/Users/migue/TravelQuest/src/screens/main/MapScreen.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, Text, StyleSheet, TextInput, TouchableOpacity, Dimensions, Platform, ActivityIndicator, Modal, FlatList } from 'react-native';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { RootState } from '../../features/store';\r\nimport Map, { MapMarker } from '../../components/maps/index';\r\nimport * as Location from 'expo-location';\r\nimport { getMissionsByCityAndDuration } from '../../services/missionService';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\r\nimport generateMission from '../../services/missionGenerator';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport DatePicker from 'react-datepicker';\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport '../../styles/datepicker.css';\r\nimport { searchCities } from '../../services/supabase';\r\nimport { format } from 'date-fns';\r\n\r\ninterface City {\r\n  id: string;\r\n  name: string;\r\n  latitude: number;\r\n  longitude: number;\r\n}\r\n\r\ntype RootStackParamList = {\r\n  Missions: {\r\n    journeyId: string;\r\n    challenges: any[];\r\n  };\r\n};\r\n\r\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList>;\r\n\r\nconst { width, height } = Dimensions.get('window');\r\n\r\nconst LoadingModal = ({ visible, currentStep }: { visible: boolean; currentStep: string }) => (\r\n  <Modal\r\n    transparent={true}\r\n    visible={visible}\r\n    animationType=\"fade\"\r\n  >\r\n    <View style={styles.modalContainer}>\r\n      <View style={styles.loadingCard}>\r\n        <ActivityIndicator size=\"large\" color=\"#4CAF50\" />\r\n        <Text style={styles.loadingTitle}>Generando tu aventura</Text>\r\n        <Text style={styles.loadingStep}>{currentStep}</Text>\r\n      </View>\r\n    </View>\r\n  </Modal>\r\n);\r\n\r\nconst DateRangePickerWeb = ({ \r\n  startDate,\r\n  endDate,\r\n  onDatesChange\r\n}: { \r\n  startDate: Date;\r\n  endDate: Date;\r\n  onDatesChange: (dates: [Date | null, Date | null]) => void;\r\n}) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const handleChange = (update: [Date | null, Date | null]) => {\r\n    onDatesChange(update);\r\n    if (update[0] && update[1]) {\r\n      setIsOpen(false);\r\n    }\r\n  };\r\n\r\n  const formatDateRange = () => {\r\n    if (!startDate && !endDate) return \"Selecciona las fechas\";\r\n    if (!endDate) return format(startDate, \"dd MMM yyyy\");\r\n    return `${format(startDate, \"dd MMM\")} - ${format(endDate, \"dd MMM yyyy\")}`;\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      width: '100%',\r\n      position: 'relative',\r\n      zIndex: 1000,\r\n      display: 'flex',\r\n      flexDirection: 'row',\r\n      alignItems: 'center',\r\n      justifyContent: 'space-between',\r\n      padding: '20px',\r\n      backgroundColor: 'white',\r\n      borderRadius: '8px',\r\n      boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n    }}>\r\n      <div style={{\r\n        flex: 1,\r\n        paddingRight: '20px'\r\n      }}>\r\n        <Text style={{\r\n          fontSize: '16px',\r\n          fontWeight: 'bold',\r\n          marginBottom: '8px',\r\n          color: '#333'\r\n        }}>\r\n          Elige las fechas de tu viaje\r\n        </Text>\r\n        <TouchableOpacity\r\n          onPress={() => setIsOpen(!isOpen)}\r\n          style={{\r\n            flexDirection: 'row',\r\n            alignItems: 'center',\r\n            padding: '12px',\r\n            borderRadius: '4px',\r\n            backgroundColor: '#f5f5f5'\r\n          }}\r\n        >\r\n          <Ionicons name=\"calendar-outline\" size={24} color=\"#666\" />\r\n          <Text style={{\r\n            marginLeft: '8px',\r\n            fontSize: '14px',\r\n            color: '#333'\r\n          }}>\r\n            {formatDateRange()}\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </div>\r\n\r\n      {isOpen && (\r\n        <div style={{\r\n          position: 'absolute',\r\n          top: '100%',\r\n          right: 0,\r\n          zIndex: 1001,\r\n          backgroundColor: 'white',\r\n          borderRadius: '8px',\r\n          boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\r\n          padding: '16px'\r\n        }}>\r\n          <DatePicker\r\n            selected={startDate}\r\n            onChange={handleChange}\r\n            startDate={startDate}\r\n            endDate={endDate}\r\n            selectsRange\r\n            inline\r\n            monthsShown={2}\r\n            minDate={new Date()}\r\n            calendarClassName=\"booking-calendar\"\r\n            dateFormat=\"dd/MM/yyyy\"\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst MapScreen = () => {\r\n  const navigation = useNavigation<NavigationProp>();\r\n  const dispatch = useDispatch();\r\n  const { user } = useSelector((state: RootState) => state.auth);\r\n  const [region, setRegion] = useState({\r\n    latitude: 38.3452,\r\n    longitude: -0.4815,\r\n    latitudeDelta: 0.0922,\r\n    longitudeDelta: 0.0421,\r\n  });\r\n  const [userLocation, setUserLocation] = useState<{ latitude: number; longitude: number } | null>(null);\r\n  const [searchCity, setSearchCity] = useState('');\r\n  const [missionCount, setMissionCount] = useState('');\r\n  const [startDate, setStartDate] = useState(new Date());\r\n  const [endDate, setEndDate] = useState(new Date());\r\n  const [showStartDatePicker, setShowStartDatePicker] = useState(false);\r\n  const [showEndDatePicker, setShowEndDatePicker] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState<string | null>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [currentStep, setCurrentStep] = useState('');\r\n  const [hasLocationPermission, setHasLocationPermission] = useState(false);\r\n  const [isLoadingLocation, setIsLoadingLocation] = useState(true);\r\n  const [filteredCities, setFilteredCities] = useState<City[]>([]);\r\n  const [showSuggestions, setShowSuggestions] = useState(false);\r\n\r\n  const getLocation = async () => {\r\n    try {\r\n      setIsLoadingLocation(true);\r\n      console.log('Solicitando permisos de ubicación...');\r\n      let { status } = await Location.requestForegroundPermissionsAsync();\r\n      console.log('Estado de los permisos:', status);\r\n      setHasLocationPermission(status === 'granted');\r\n      \r\n      if (status !== 'granted') {\r\n        console.log('Permisos denegados');\r\n        setErrorMsg('Se requiere permiso para acceder a la ubicación');\r\n        return;\r\n      }\r\n\r\n      console.log('Obteniendo ubicación actual...');\r\n      let location = await Location.getCurrentPositionAsync({\r\n        accuracy: Location.Accuracy.Balanced,\r\n        timeInterval: 5000,\r\n        mayShowUserSettingsDialog: true\r\n      });\r\n      \r\n      console.log('Ubicación obtenida:', location);\r\n      \r\n      const newRegion = {\r\n        latitude: location.coords.latitude,\r\n        longitude: location.coords.longitude,\r\n        latitudeDelta: 0.0922,\r\n        longitudeDelta: 0.0421,\r\n      };\r\n      \r\n      setRegion(newRegion);\r\n      setUserLocation({\r\n        latitude: location.coords.latitude,\r\n        longitude: location.coords.longitude,\r\n      });\r\n    } catch (error) {\r\n      console.error('Error obteniendo la ubicación:', error);\r\n      setErrorMsg('Error al obtener la ubicación. Por favor, verifica que el GPS esté activado.');\r\n    } finally {\r\n      setIsLoadingLocation(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getLocation();\r\n  }, []);\r\n\r\n  const calculateDuration = (start: Date, end: Date) => {\r\n    const diffTime = Math.abs(end.getTime() - start.getTime());\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    return diffDays;\r\n  };\r\n\r\n  const handleCitySearch = async (text: string) => {\r\n    const upperText = text.toUpperCase();\r\n    setSearchCity(upperText);\r\n    \r\n    if (text.length > 2) {\r\n      try {\r\n        const cities = await searchCities(upperText);\r\n        setFilteredCities(cities);\r\n        setShowSuggestions(true);\r\n      } catch (error) {\r\n        console.error('Error searching cities:', error);\r\n        setFilteredCities([]);\r\n      }\r\n    } else {\r\n      setFilteredCities([]);\r\n      setShowSuggestions(false);\r\n    }\r\n  };\r\n\r\n  const handleCitySelect = (city: any) => {\r\n    setSearchCity(city.name.toUpperCase());\r\n    setShowSuggestions(false);\r\n    setRegion({\r\n      latitude: city.latitude,\r\n      longitude: city.longitude,\r\n      latitudeDelta: 0.0922,\r\n      longitudeDelta: 0.0421,\r\n    });\r\n  };\r\n\r\n  const handleSearch = async () => {\r\n    if (!user?.id) {\r\n      setErrorMsg('Debes iniciar sesión para generar misiones');\r\n      return;\r\n    }\r\n\r\n    const missionCountNum = parseInt(missionCount);\r\n    const duration = calculateDuration(startDate, endDate);\r\n    const upperSearchCity = searchCity.toUpperCase();\r\n\r\n    if (!upperSearchCity || !missionCountNum) {\r\n      setErrorMsg('Por favor, completa todos los campos');\r\n      return;\r\n    }\r\n\r\n    if (endDate < startDate) {\r\n      setErrorMsg('La fecha de fin no puede ser anterior a la fecha de inicio');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setIsLoading(true);\r\n      setErrorMsg(null);\r\n\r\n      setCurrentStep('Preparando tu viaje a ' + upperSearchCity + '...');\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n\r\n      setCurrentStep('Buscando lugares interesantes...');\r\n      await new Promise(resolve => setTimeout(resolve, 1500));\r\n\r\n      setCurrentStep('Creando misiones emocionantes...');\r\n      const result = await generateMission(upperSearchCity, duration, missionCountNum, user.id, startDate, endDate);\r\n      \r\n      if (!result.journeyId) {\r\n        throw new Error('No se recibió el ID del journey');\r\n      }\r\n\r\n      setCurrentStep('¡Todo listo para tu aventura!');\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n\r\n      navigation.navigate('Missions', {\r\n        journeyId: result.journeyId,\r\n        challenges: result.challenges || []\r\n      });\r\n    } catch (error) {\r\n      console.error('Error generando misiones:', error);\r\n      setErrorMsg('Error al generar las misiones. Por favor, intenta de nuevo.');\r\n    } finally {\r\n      setIsLoading(false);\r\n      setCurrentStep('');\r\n    }\r\n  };\r\n\r\n  const handleDatesChange = (dates: [Date | null, Date | null]) => {\r\n    const [start, end] = dates;\r\n    if (start) setStartDate(start);\r\n    if (end) setEndDate(end);\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <LoadingModal visible={isLoading} currentStep={currentStep} />\r\n      \r\n      <View style={styles.searchContainer}>\r\n        <View style={styles.searchInputContainer}>\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"Buscar ciudad\"\r\n            value={searchCity}\r\n            onChangeText={handleCitySearch}\r\n            onFocus={() => setShowSuggestions(true)}\r\n          />\r\n          {showSuggestions && filteredCities.length > 0 && (\r\n            <FlatList\r\n              data={filteredCities}\r\n              keyExtractor={(item) => item.id}\r\n              renderItem={({ item }) => (\r\n                <TouchableOpacity\r\n                  style={styles.suggestionItem}\r\n                  onPress={() => handleCitySelect(item)}\r\n                >\r\n                  <Text style={styles.suggestionText}>{item.name}</Text>\r\n                </TouchableOpacity>\r\n              )}\r\n              style={styles.suggestionsList}\r\n            />\r\n          )}\r\n        </View>\r\n        <TextInput\r\n          style={styles.input}\r\n          placeholder=\"Número de misiones\"\r\n          value={missionCount}\r\n          onChangeText={setMissionCount}\r\n          keyboardType=\"numeric\"\r\n        />\r\n        \r\n        {Platform.OS === 'web' ? (\r\n          <DateRangePickerWeb\r\n            startDate={startDate}\r\n            endDate={endDate}\r\n            onDatesChange={handleDatesChange}\r\n          />\r\n        ) : (\r\n          <View style={styles.datePickersRow}>\r\n            <TouchableOpacity\r\n              style={[styles.dateButton, { flex: 1, marginRight: 5 }]}\r\n              onPress={() => setShowStartDatePicker(true)}\r\n            >\r\n              <Text style={styles.dateButtonText}>\r\n                Inicio: {startDate.toLocaleDateString()}\r\n              </Text>\r\n            </TouchableOpacity>\r\n\r\n            <TouchableOpacity\r\n              style={[styles.dateButton, { flex: 1, marginLeft: 5 }]}\r\n              onPress={() => setShowEndDatePicker(true)}\r\n            >\r\n              <Text style={styles.dateButtonText}>\r\n                Fin: {endDate.toLocaleDateString()}\r\n              </Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n        )}\r\n\r\n        {(showStartDatePicker || showEndDatePicker) && (\r\n          <DatePicker\r\n            selected={showStartDatePicker ? startDate : endDate}\r\n            onChange={(date) => {\r\n              if (Platform.OS === 'android') {\r\n                setShowStartDatePicker(false);\r\n                setShowEndDatePicker(false);\r\n              }\r\n              if (date) {\r\n                if (showStartDatePicker) {\r\n                  setStartDate(date);\r\n                } else {\r\n                  setEndDate(date);\r\n                }\r\n              }\r\n            }}\r\n            minDate={new Date()}\r\n            maxDate={new Date()}\r\n            showTimeSelect={false}\r\n            dateFormat=\"dd/MM/yyyy\"\r\n            className=\"booking-calendar\"\r\n            calendarClassName=\"booking-calendar\"\r\n          />\r\n        )}\r\n\r\n        <Text style={styles.durationText}>\r\n          Duración del viaje: {calculateDuration(startDate, endDate)} días\r\n        </Text>\r\n\r\n        <TouchableOpacity\r\n          style={[styles.button, isLoading && styles.buttonDisabled]}\r\n          onPress={handleSearch}\r\n          disabled={isLoading}\r\n        >\r\n          <Text style={styles.buttonText}>\r\n            {isLoading ? 'Generando...' : 'Buscar Aventuras'}\r\n          </Text>\r\n        </TouchableOpacity>\r\n        {errorMsg ? <Text style={styles.errorText}>{errorMsg}</Text> : null}\r\n      </View>\r\n\r\n      <View style={styles.mapContainer}>\r\n        {isLoadingLocation ? (\r\n          <View style={styles.loadingContainer}>\r\n            <ActivityIndicator size=\"large\" color=\"#4CAF50\" />\r\n            <Text style={styles.loadingText}>Obteniendo ubicación...</Text>\r\n            {errorMsg ? (\r\n              <TouchableOpacity style={styles.retryButton} onPress={getLocation}>\r\n                <Text style={styles.retryButtonText}>Reintentar</Text>\r\n              </TouchableOpacity>\r\n            ) : null}\r\n          </View>\r\n        ) : (\r\n          <Map\r\n            region={region}\r\n            style={styles.map}\r\n            showsUserLocation={hasLocationPermission}\r\n            showsMyLocationButton={hasLocationPermission}\r\n            userLocation={userLocation}\r\n            onRegionChangeComplete={(newRegion) => {\r\n              setRegion(newRegion);\r\n            }}\r\n          />\r\n        )}\r\n        {errorMsg ? (\r\n          <View style={styles.errorOverlay}>\r\n            <Text style={styles.errorText}>{errorMsg}</Text>\r\n          </View>\r\n        ) : null}\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#f5f5f5',\r\n  },\r\n  searchContainer: {\r\n    backgroundColor: 'white',\r\n    padding: 15,\r\n    borderBottomLeftRadius: 20,\r\n    borderBottomRightRadius: 20,\r\n    shadowColor: '#000',\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 2,\r\n    },\r\n    shadowOpacity: 0.25,\r\n    shadowRadius: 3.84,\r\n    elevation: 5,\r\n  },\r\n  mapContainer: {\r\n    flex: 1,\r\n    marginTop: 10,\r\n  },\r\n  map: {\r\n    width: '100%',\r\n    height: '100%',\r\n  },\r\n  input: {\r\n    height: 40,\r\n    borderColor: '#ddd',\r\n    borderWidth: 1,\r\n    borderRadius: 5,\r\n    marginBottom: 10,\r\n    paddingHorizontal: 10,\r\n    backgroundColor: 'white',\r\n  },\r\n  button: {\r\n    backgroundColor: '#4CAF50',\r\n    padding: 15,\r\n    borderRadius: 5,\r\n    alignItems: 'center',\r\n  },\r\n  buttonDisabled: {\r\n    backgroundColor: '#cccccc',\r\n  },\r\n  buttonText: {\r\n    color: 'white',\r\n    fontWeight: 'bold',\r\n  },\r\n  errorText: {\r\n    color: 'red',\r\n    marginTop: 10,\r\n    textAlign: 'center',\r\n  },\r\n  modalContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n  },\r\n  loadingCard: {\r\n    backgroundColor: 'white',\r\n    padding: 20,\r\n    borderRadius: 15,\r\n    alignItems: 'center',\r\n    width: '80%',\r\n    shadowColor: '#000',\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 2,\r\n    },\r\n    shadowOpacity: 0.25,\r\n    shadowRadius: 3.84,\r\n    elevation: 5,\r\n  },\r\n  loadingTitle: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold',\r\n    color: '#333',\r\n    marginTop: 15,\r\n    marginBottom: 10,\r\n  },\r\n  loadingStep: {\r\n    fontSize: 16,\r\n    color: '#666',\r\n    textAlign: 'center',\r\n    marginTop: 10,\r\n  },\r\n  datePickersRow: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    marginBottom: 10,\r\n    backgroundColor: 'white',\r\n    borderRadius: 8,\r\n    padding: 15,\r\n    shadowColor: '#000',\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 2,\r\n    },\r\n    shadowOpacity: 0.1,\r\n    shadowRadius: 3.84,\r\n    elevation: 2,\r\n  },\r\n  datePickerContainer: {\r\n    flex: 1,\r\n  },\r\n  dateInputContainer: {\r\n    width: '100%',\r\n  },\r\n  datePickerTitle: {\r\n    fontSize: 16,\r\n    fontWeight: '500',\r\n    color: '#333',\r\n    marginBottom: 10,\r\n  },\r\n  dateInput: {\r\n    width: '100%',\r\n    height: 40,\r\n    borderColor: '#ddd',\r\n    borderWidth: 1,\r\n    borderRadius: 5,\r\n    paddingHorizontal: 10,\r\n    backgroundColor: 'white',\r\n    fontSize: 16,\r\n    cursor: 'pointer',\r\n  },\r\n  dateButton: {\r\n    backgroundColor: '#f0f0f0',\r\n    padding: 10,\r\n    borderRadius: 5,\r\n  },\r\n  dateButtonText: {\r\n    color: '#333',\r\n    textAlign: 'center',\r\n  },\r\n  durationText: {\r\n    textAlign: 'center',\r\n    marginBottom: 10,\r\n    color: '#666',\r\n    fontSize: 16,\r\n  },\r\n  loadingContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: '#f5f5f5',\r\n  },\r\n  loadingText: {\r\n    marginTop: 10,\r\n    color: '#666',\r\n    fontSize: 16,\r\n  },\r\n  errorOverlay: {\r\n    position: 'absolute',\r\n    top: 10,\r\n    left: 10,\r\n    right: 10,\r\n    backgroundColor: 'rgba(244, 67, 54, 0.9)',\r\n    padding: 10,\r\n    borderRadius: 5,\r\n  },\r\n  retryButton: {\r\n    backgroundColor: '#4CAF50',\r\n    padding: 10,\r\n    borderRadius: 5,\r\n    marginTop: 10,\r\n  },\r\n  retryButtonText: {\r\n    color: 'white',\r\n    textAlign: 'center',\r\n    fontWeight: 'bold',\r\n  },\r\n  searchInputContainer: {\r\n    position: 'relative',\r\n    zIndex: 1,\r\n  },\r\n  suggestionsList: {\r\n    position: 'absolute',\r\n    top: '100%',\r\n    left: 0,\r\n    right: 0,\r\n    backgroundColor: 'white',\r\n    borderRadius: 5,\r\n    maxHeight: 200,\r\n    zIndex: 2,\r\n    elevation: 5,\r\n    shadowColor: '#000',\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 2,\r\n    },\r\n    shadowOpacity: 0.25,\r\n    shadowRadius: 3.84,\r\n  },\r\n  suggestionItem: {\r\n    padding: 15,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#eee',\r\n  },\r\n  suggestionText: {\r\n    fontSize: 16,\r\n    color: '#333',\r\n  },\r\n  dateRangeContainer: {\r\n    backgroundColor: 'white',\r\n    borderRadius: 8,\r\n    padding: 15,\r\n    marginBottom: 15,\r\n    shadowColor: '#000',\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 2,\r\n    },\r\n    shadowOpacity: 0.1,\r\n    shadowRadius: 3.84,\r\n    elevation: 2,\r\n  },\r\n  datePickerWrapper: {\r\n    width: '100%',\r\n  },\r\n});\r\n\r\nexport default MapScreen; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}