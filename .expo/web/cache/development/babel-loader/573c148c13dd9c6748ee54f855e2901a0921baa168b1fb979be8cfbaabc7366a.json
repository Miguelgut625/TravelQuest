{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\TravelQuest\\\\src\\\\screens\\\\main\\\\MapScreen.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport * as Location from 'expo-location';\nimport { useNavigation } from '@react-navigation/native';\nimport generateMission from '../../services/missionGenerator';\nimport { Ionicons } from '@expo/vector-icons';\nimport { Calendar } from 'react-native-calendars';\nimport { format } from 'date-fns';\nimport { searchCities } from '../../services/supabase';\nimport GlobeView from '../../components/GlobeView';\nimport { supabase } from '../../services/supabase';\nimport { shareJourney } from '../../services/shareService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  width,\n  height\n} = Dimensions.get('window');\nconst LoadingModal = ({\n  visible,\n  currentStep\n}) => _jsxDEV(Modal, {\n  transparent: true,\n  visible: visible,\n  animationType: \"fade\",\n  children: _jsxDEV(View, {\n    style: styles.modalContainer,\n    children: _jsxDEV(View, {\n      style: styles.loadingCard,\n      children: [_jsxDEV(ActivityIndicator, {\n        size: \"large\",\n        color: \"#4CAF50\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: styles.loadingTitle,\n        children: \"Generando tu aventura\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: styles.loadingStep,\n        children: currentStep\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: styles.progressBar,\n        children: _jsxDEV(View, {\n          style: [styles.progressFill, {\n            width: currentStep.includes('Preparando') ? '30%' : currentStep.includes('Buscando') ? '60%' : currentStep.includes('Creando') ? '90%' : '10%'\n          }]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 44,\n  columnNumber: 3\n}, this);\nconst DateRangePickerMobile = ({\n  startDateProp,\n  endDateProp,\n  onDatesChange\n}) => {\n  const [startDate, setStartDate] = useState(startDateProp);\n  const [endDate, setEndDate] = useState(endDateProp);\n  const [isOpen, setIsOpen] = useState(false);\n  const [selectedDates, setSelectedDates] = useState({});\n  useEffect(() => {\n    setStartDate(startDateProp);\n    setEndDate(endDateProp);\n    if (startDateProp || endDateProp) {\n      updateMarkedDates(startDateProp, endDateProp);\n    }\n  }, [startDateProp, endDateProp]);\n  const updateMarkedDates = (start, end) => {\n    const newMarkedDates = {};\n    if (start) {\n      const startStr = format(start, 'yyyy-MM-dd');\n      newMarkedDates[startStr] = {\n        startingDay: true,\n        color: '#005F9E',\n        textColor: 'white'\n      };\n    }\n    if (end) {\n      const endStr = format(end, 'yyyy-MM-dd');\n      newMarkedDates[endStr] = {\n        endingDay: true,\n        color: '#005F9E',\n        textColor: 'white'\n      };\n    }\n    if (start && end) {\n      let currentDate = new Date(start);\n      currentDate.setDate(currentDate.getDate() + 1);\n      while (currentDate < end) {\n        const dateStr = format(currentDate, 'yyyy-MM-dd');\n        newMarkedDates[dateStr] = {\n          color: '#e5f3ff',\n          textColor: '#005F9E'\n        };\n        currentDate.setDate(currentDate.getDate() + 1);\n      }\n    }\n    setSelectedDates(newMarkedDates);\n  };\n  const handleDayPress = day => {\n    const selectedDate = new Date(day.dateString);\n    if (!startDate || startDate && endDate) {\n      const newStart = selectedDate;\n      setStartDate(newStart);\n      setEndDate(null);\n      updateMarkedDates(newStart, null);\n      onDatesChange([newStart, null]);\n    } else {\n      if (selectedDate < startDate) {\n        const newEnd = new Date(startDate);\n        setEndDate(newEnd);\n        setStartDate(selectedDate);\n        updateMarkedDates(selectedDate, newEnd);\n        onDatesChange([selectedDate, newEnd]);\n      } else {\n        setEndDate(selectedDate);\n        updateMarkedDates(startDate, selectedDate);\n        onDatesChange([startDate, selectedDate]);\n      }\n    }\n  };\n  const calculateDuration = (start, end) => {\n    if (!start || !end) return 0;\n    const diffTime = Math.abs(end.getTime() - start.getTime());\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  };\n  const formatDateRange = () => {\n    if (!startDate && !endDate) {\n      return 'Selecciona fechas';\n    }\n    const formatDate = date => {\n      if (!date) return '';\n      return format(date, 'dd MMM');\n    };\n    const duration = calculateDuration(startDate, endDate);\n    const startStr = formatDate(startDate);\n    const endStr = formatDate(endDate);\n    if (startStr && endStr) {\n      return `${startStr} - ${endStr} · ${duration} noches`;\n    } else if (startStr) {\n      return `${startStr} - Selecciona fecha final`;\n    } else {\n      return 'Selecciona fechas';\n    }\n  };\n  return _jsxDEV(View, {\n    style: styles.datePickerContainer,\n    children: [_jsxDEV(TouchableOpacity, {\n      style: styles.datePickerButton,\n      onPress: () => setIsOpen(!isOpen),\n      children: _jsxDEV(View, {\n        style: styles.datePickerContent,\n        children: [_jsxDEV(Text, {\n          style: styles.datePickerText,\n          children: formatDateRange()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), _jsxDEV(Ionicons, {\n          name: isOpen ? 'chevron-up' : 'chevron-down',\n          size: 24,\n          color: \"white\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this), isOpen && _jsxDEV(View, {\n      style: styles.calendarDropdown,\n      children: _jsxDEV(Calendar, {\n        minDate: new Date().toISOString().split('T')[0],\n        onDayPress: handleDayPress,\n        markingType: \"period\",\n        markedDates: selectedDates,\n        theme: {\n          calendarBackground: '#ffffff',\n          textSectionTitleColor: '#b6c1cd',\n          selectedDayBackgroundColor: '#005F9E',\n          selectedDayTextColor: '#ffffff',\n          todayTextColor: '#005F9E',\n          dayTextColor: '#2d4150',\n          textDisabledColor: '#d9e1e8',\n          dotColor: '#005F9E',\n          selectedDotColor: '#ffffff',\n          arrowColor: '#005F9E',\n          monthTextColor: '#005F9E',\n          indicatorColor: '#005F9E'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 182,\n    columnNumber: 5\n  }, this);\n};\nconst DateRangePickerWeb = ({\n  startDateProp,\n  endDateProp,\n  onDatesChange\n}) => {\n  const [startDate, setStartDate] = useState(startDateProp);\n  const [endDate, setEndDate] = useState(endDateProp);\n  const [isOpen, setIsOpen] = useState(false);\n  const [currentMonth, setCurrentMonth] = useState(new Date());\n  useEffect(() => {\n    setStartDate(startDateProp);\n    setEndDate(endDateProp);\n  }, [startDateProp, endDateProp]);\n  const generateCalendar = date => {\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const firstDay = new Date(year, month, 1);\n    const startingDayOfWeek = firstDay.getDay();\n    const lastDay = new Date(year, month + 1, 0);\n    const totalDays = lastDay.getDate();\n    const days = [];\n    for (let i = 0; i < startingDayOfWeek; i++) {\n      const prevMonthDay = new Date(year, month, -i);\n      days.unshift({\n        date: prevMonthDay,\n        isCurrentMonth: false,\n        isToday: false,\n        isSelected: false\n      });\n    }\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    for (let i = 1; i <= totalDays; i++) {\n      const currentDate = new Date(year, month, i);\n      currentDate.setHours(0, 0, 0, 0);\n      const isToday = currentDate.getTime() === today.getTime();\n      const isStartDate = startDate && currentDate.getTime() === new Date(startDate).setHours(0, 0, 0, 0);\n      const isEndDate = endDate && currentDate.getTime() === new Date(endDate).setHours(0, 0, 0, 0);\n      const isInRange = startDate && endDate && currentDate.getTime() > new Date(startDate).setHours(0, 0, 0, 0) && currentDate.getTime() < new Date(endDate).setHours(0, 0, 0, 0);\n      days.push({\n        date: currentDate,\n        isCurrentMonth: true,\n        isToday,\n        isSelected: isStartDate || isEndDate,\n        isStartDate,\n        isEndDate,\n        isInRange\n      });\n    }\n    const remainingDays = 7 - days.length % 7;\n    if (remainingDays < 7) {\n      for (let i = 1; i <= remainingDays; i++) {\n        const nextMonthDay = new Date(year, month + 1, i);\n        days.push({\n          date: nextMonthDay,\n          isCurrentMonth: false,\n          isToday: false,\n          isSelected: false\n        });\n      }\n    }\n    return days;\n  };\n  const handleDateClick = date => {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    if (date < today) {\n      return;\n    }\n    if (!startDate || startDate && endDate) {\n      setStartDate(date);\n      setEndDate(null);\n      onDatesChange([date, null]);\n    } else {\n      if (date < startDate) {\n        setEndDate(new Date(startDate));\n        setStartDate(date);\n        onDatesChange([date, startDate]);\n      } else {\n        setEndDate(date);\n        onDatesChange([startDate, date]);\n      }\n    }\n  };\n  const formatMonth = date => {\n    const months = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];\n    return `${months[date.getMonth()]} ${date.getFullYear()}`;\n  };\n  const changeMonth = offset => {\n    const newMonth = new Date(currentMonth);\n    newMonth.setMonth(newMonth.getMonth() + offset);\n    setCurrentMonth(newMonth);\n  };\n  const days = generateCalendar(currentMonth);\n  const weekDays = ['Dom', 'Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb'];\n  const calculateDuration = (start, end) => {\n    if (!start || !end) return 0;\n    const diffTime = Math.abs(end.getTime() - start.getTime());\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  };\n  const formatDate = date => {\n    if (!date) return '';\n    return `${date.getDate()} ${['ene', 'feb', 'mar', 'abr', 'may', 'jun', 'jul', 'ago', 'sep', 'oct', 'nov', 'dic'][date.getMonth()]}`;\n  };\n  const formatDateRange = () => {\n    if (!startDate && !endDate) {\n      return 'Selecciona fechas';\n    }\n    const startStr = formatDate(startDate);\n    const endStr = formatDate(endDate);\n    const duration = calculateDuration(startDate, endDate);\n    if (startStr && endStr) {\n      return `${startStr} - ${endStr} · ${duration} noches`;\n    } else if (startStr) {\n      return `${startStr} - Selecciona fecha final`;\n    } else {\n      return 'Selecciona fechas';\n    }\n  };\n  return _jsxDEV(View, {\n    style: styles.datePickerContainer,\n    children: [_jsxDEV(TouchableOpacity, {\n      style: styles.datePickerButton,\n      onPress: () => setIsOpen(!isOpen),\n      children: _jsxDEV(View, {\n        style: styles.datePickerContent,\n        children: [_jsxDEV(Text, {\n          style: styles.datePickerText,\n          children: formatDateRange()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 11\n        }, this), _jsxDEV(Ionicons, {\n          name: isOpen ? 'chevron-up' : 'chevron-down',\n          size: 24,\n          color: \"white\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 7\n    }, this), isOpen && _jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: '100%',\n        left: 0,\n        right: 0,\n        backgroundColor: 'white',\n        zIndex: 9999,\n        boxShadow: '0px 2px 10px rgba(0,0,0,0.1)',\n        borderRadius: 8,\n        marginTop: 4,\n        padding: 15,\n        width: 620,\n        marginLeft: 'auto',\n        marginRight: 'auto'\n      },\n      children: [_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          marginBottom: 10\n        },\n        children: [_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'center'\n          },\n          children: [_jsxDEV(\"button\", {\n            onClick: () => changeMonth(-1),\n            style: {\n              background: 'none',\n              border: 'none',\n              fontSize: 24,\n              cursor: 'pointer',\n              color: '#005F9E'\n            },\n            children: \"\\u2190\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 15\n          }, this), _jsxDEV(\"h3\", {\n            style: {\n              margin: '0 15px',\n              color: '#005F9E'\n            },\n            children: formatMonth(currentMonth)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 15\n          }, this), _jsxDEV(\"button\", {\n            onClick: () => changeMonth(1),\n            style: {\n              background: 'none',\n              border: 'none',\n              fontSize: 24,\n              cursor: 'pointer',\n              color: '#005F9E'\n            },\n            children: \"\\u2192\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 13\n        }, this), _jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center'\n          },\n          children: _jsxDEV(\"button\", {\n            onClick: () => {\n              setStartDate(null);\n              setEndDate(null);\n              onDatesChange([null, null]);\n            },\n            style: {\n              background: 'none',\n              border: '1px solid #ddd',\n              padding: '5px 10px',\n              borderRadius: 4,\n              cursor: 'pointer'\n            },\n            children: \"Limpiar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 11\n      }, this), _jsxDEV(\"div\", {\n        style: {\n          display: 'grid',\n          gridTemplateColumns: 'repeat(7, 1fr)',\n          gap: 5,\n          textAlign: 'center'\n        },\n        children: [weekDays.map(day => _jsxDEV(\"div\", {\n          style: {\n            padding: 5,\n            fontWeight: 'bold',\n            color: '#666'\n          },\n          children: day\n        }, day, false, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 15\n        }, this)), days.map((day, index) => _jsxDEV(\"div\", {\n          onClick: () => day.isCurrentMonth && handleDateClick(day.date),\n          style: {\n            padding: 10,\n            cursor: day.isCurrentMonth ? 'pointer' : 'default',\n            backgroundColor: day.isStartDate || day.isEndDate ? '#005F9E' : day.isInRange ? '#e5f3ff' : 'transparent',\n            color: day.isStartDate || day.isEndDate ? 'white' : !day.isCurrentMonth ? '#ccc' : day.isToday ? '#005F9E' : '#333',\n            fontWeight: day.isToday ? 'bold' : 'normal',\n            borderRadius: 4,\n            opacity: day.isCurrentMonth ? 1 : 0.5\n          },\n          children: day.date.getDate()\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 381,\n    columnNumber: 5\n  }, this);\n};\nconst FriendSelectionModal = ({\n  visible,\n  onClose,\n  onSelect\n}) => {\n  const [friends, setFriends] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const user = useSelector(state => state.auth.user);\n  useEffect(() => {\n    if (visible) {\n      const fetchFriends = async () => {\n        if (!user) {\n          setLoading(false);\n          return;\n        }\n        try {\n          setLoading(true);\n          const {\n            data: friendData,\n            error\n          } = await supabase.from('friends').select('user2Id').eq('user1Id', user.id);\n          if (error) throw error;\n          const friendDetails = await Promise.all(friendData.map(async friend => {\n            const {\n              data: userData,\n              error: userError\n            } = await supabase.from('users').select('username, points').eq('id', friend.user2Id).single();\n            if (userError) return null;\n            return {\n              user2Id: friend.user2Id,\n              username: userData.username,\n              points: userData.points\n            };\n          }));\n          setFriends(friendDetails.filter(f => f !== null));\n        } catch (error) {\n          console.error('Error fetching friends:', error);\n        } finally {\n          setLoading(false);\n        }\n      };\n      fetchFriends();\n    }\n  }, [visible, user]);\n  return _jsxDEV(Modal, {\n    visible: visible,\n    animationType: \"slide\",\n    onRequestClose: onClose,\n    transparent: true,\n    children: _jsxDEV(View, {\n      style: modalStyles.modalOverlay,\n      children: _jsxDEV(View, {\n        style: modalStyles.modalContent,\n        children: [_jsxDEV(Text, {\n          style: modalStyles.modalTitle,\n          children: \"\\xBFQuieres compartir tu aventura?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 578,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          style: modalStyles.modalSubtitle,\n          children: \"Selecciona un amigo para compartir este viaje\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 11\n        }, this), loading ? _jsxDEV(ActivityIndicator, {\n          size: \"large\",\n          color: \"#4CAF50\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 13\n        }, this) : _jsxDEV(FlatList, {\n          data: friends,\n          keyExtractor: item => item.user2Id,\n          renderItem: ({\n            item\n          }) => _jsxDEV(TouchableOpacity, {\n            style: modalStyles.friendItem,\n            onPress: () => onSelect(item),\n            children: [_jsxDEV(Text, {\n              style: modalStyles.friendName,\n              children: item.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 588,\n              columnNumber: 19\n            }, this), _jsxDEV(Text, {\n              style: modalStyles.friendPoints,\n              children: [\"Puntos: \", item.points]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 589,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 587,\n            columnNumber: 17\n          }, this),\n          ListEmptyComponent: _jsxDEV(Text, {\n            style: modalStyles.emptyText,\n            children: \"No tienes amigos agregados\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 13\n        }, this), _jsxDEV(View, {\n          style: modalStyles.buttonContainer,\n          children: _jsxDEV(TouchableOpacity, {\n            style: modalStyles.cancelButton,\n            onPress: onClose,\n            children: _jsxDEV(Text, {\n              style: modalStyles.cancelButtonText,\n              children: \"No compartir\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 599,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 598,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 576,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 575,\n    columnNumber: 5\n  }, this);\n};\nconst modalStyles = StyleSheet.create({\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  modalContent: {\n    width: '80%',\n    backgroundColor: 'white',\n    borderRadius: 10,\n    padding: 20,\n    maxHeight: '80%'\n  },\n  modalTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginBottom: 10,\n    textAlign: 'center'\n  },\n  modalSubtitle: {\n    fontSize: 16,\n    color: '#666',\n    marginBottom: 20,\n    textAlign: 'center'\n  },\n  friendItem: {\n    padding: 15,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee'\n  },\n  friendName: {\n    fontSize: 16,\n    fontWeight: '500'\n  },\n  friendPoints: {\n    fontSize: 14,\n    color: '#666',\n    marginTop: 4\n  },\n  buttonContainer: {\n    marginTop: 20,\n    flexDirection: 'row',\n    justifyContent: 'center'\n  },\n  cancelButton: {\n    backgroundColor: '#f44336',\n    padding: 12,\n    borderRadius: 5,\n    minWidth: 120,\n    alignItems: 'center'\n  },\n  cancelButtonText: {\n    color: 'white',\n    fontWeight: 'bold'\n  },\n  emptyText: {\n    textAlign: 'center',\n    color: '#666',\n    padding: 20\n  }\n});\nconst MapScreen = () => {\n  const navigation = useNavigation();\n  const dispatch = useDispatch();\n  const {\n    user\n  } = useSelector(state => state.auth);\n  const [region, setRegion] = useState({\n    latitude: 40.416775,\n    longitude: -3.703790,\n    latitudeDelta: 0.0922,\n    longitudeDelta: 0.0421\n  });\n  const [searchCity, setSearchCity] = useState('');\n  const [missionCount, setMissionCount] = useState('');\n  const [startDate, setStartDate] = useState(null);\n  const [endDate, setEndDate] = useState(null);\n  const [showStartDatePicker, setShowStartDatePicker] = useState(false);\n  const [showEndDatePicker, setShowEndDatePicker] = useState(false);\n  const [errorMsg, setErrorMsg] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [currentStep, setCurrentStep] = useState('');\n  const [hasLocationPermission, setHasLocationPermission] = useState(false);\n  const [isLoadingLocation, setIsLoadingLocation] = useState(true);\n  const [errorLocationMsg, setErrorLocationMsg] = useState(null);\n  const [filteredCities, setFilteredCities] = useState([]);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [duration, setDuration] = useState(0);\n  const [userLocation, setUserLocation] = useState(null);\n  const [showShareModal, setShowShareModal] = useState(false);\n  const [generatedJourneyId, setGeneratedJourneyId] = useState(null);\n  useEffect(() => {\n    const getLocation = async () => {\n      try {\n        setIsLoadingLocation(true);\n        setErrorLocationMsg(null);\n        console.log('Solicitando permisos de ubicación...');\n        let {\n          status\n        } = await Location.requestForegroundPermissionsAsync();\n        console.log('Estado de permisos de ubicación:', status);\n        if (status !== 'granted') {\n          console.warn('Permiso de ubicación denegado');\n          setErrorLocationMsg('Permiso de ubicación denegado. La aplicación necesita acceso a tu ubicación para funcionar correctamente.');\n          setIsLoadingLocation(false);\n          return;\n        }\n        console.log('Permisos concedidos, obteniendo ubicación actual...');\n        const options = Platform.OS === 'android' ? {\n          accuracy: Location.Accuracy.Balanced,\n          timeInterval: 10000,\n          distanceInterval: 10,\n          mayShowUserSettingsDialog: true\n        } : {\n          accuracy: Location.Accuracy.Balanced\n        };\n        console.log('Usando opciones de ubicación:', JSON.stringify(options));\n        try {\n          console.log('Intentando obtener ubicación...');\n          let location = await Location.getCurrentPositionAsync(options);\n          console.log('Ubicación obtenida:', JSON.stringify(location.coords));\n          setUserLocation({\n            latitude: location.coords.latitude,\n            longitude: location.coords.longitude\n          });\n          setRegion({\n            latitude: location.coords.latitude,\n            longitude: location.coords.longitude,\n            latitudeDelta: 0.0922,\n            longitudeDelta: 0.0421\n          });\n          setIsLoadingLocation(false);\n        } catch (locationError) {\n          console.error('Error específico al obtener ubicación:', locationError);\n          console.log('Intentando obtener última ubicación conocida...');\n          try {\n            const lastLocation = await Location.getLastKnownPositionAsync();\n            if (lastLocation) {\n              console.log('Última ubicación conocida:', JSON.stringify(lastLocation.coords));\n              setUserLocation({\n                latitude: lastLocation.coords.latitude,\n                longitude: lastLocation.coords.longitude\n              });\n              setRegion({\n                latitude: lastLocation.coords.latitude,\n                longitude: lastLocation.coords.longitude,\n                latitudeDelta: 0.0922,\n                longitudeDelta: 0.0421\n              });\n              setIsLoadingLocation(false);\n              return;\n            }\n          } catch (lastLocError) {\n            console.error('Error al obtener última ubicación conocida:', lastLocError);\n          }\n          throw locationError;\n        }\n      } catch (error) {\n        console.error('Error al obtener la ubicación:', error);\n        setErrorLocationMsg(`Error al obtener la ubicación: ${error.message}. Usando ubicación por defecto.`);\n        setIsLoadingLocation(false);\n        setUserLocation({\n          latitude: 40.416775,\n          longitude: -3.703790\n        });\n        setRegion({\n          latitude: 40.416775,\n          longitude: -3.703790,\n          latitudeDelta: 0.0922,\n          longitudeDelta: 0.0421\n        });\n      }\n    };\n    getLocation();\n  }, []);\n  const calculateDuration = (start, end) => {\n    if (!start || !end) return 0;\n    const diffTime = Math.abs(end.getTime() - start.getTime());\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return diffDays;\n  };\n  const handleCitySearch = async text => {\n    const upperText = text.toUpperCase();\n    setSearchCity(upperText);\n    if (text.length > 2) {\n      try {\n        const cities = await searchCities(upperText);\n        setFilteredCities(cities);\n        setShowSuggestions(true);\n      } catch (error) {\n        console.error('Error searching cities:', error);\n        setFilteredCities([]);\n      }\n    } else {\n      setFilteredCities([]);\n      setShowSuggestions(false);\n    }\n  };\n  const handleCitySelect = city => {\n    setSearchCity(city.name.toUpperCase());\n    setShowSuggestions(false);\n    setRegion({\n      latitude: city.latitude,\n      longitude: city.longitude,\n      latitudeDelta: 0.0922,\n      longitudeDelta: 0.0421\n    });\n  };\n  const handleShareJourney = async friend => {\n    if (!generatedJourneyId || !user?.id) return;\n    const success = await shareJourney(generatedJourneyId, user.id, friend);\n    if (success) {\n      navigation.navigate('Missions', {\n        journeyId: generatedJourneyId,\n        challenges: []\n      });\n    }\n    setShowShareModal(false);\n    setGeneratedJourneyId(null);\n  };\n  const handleSearch = async () => {\n    if (!user?.id) {\n      setErrorMsg('Debes iniciar sesión para generar misiones');\n      return;\n    }\n    const missionCountNum = parseInt(missionCount) || 3;\n    if (!duration || duration <= 0) {\n      setErrorMsg('Por favor, selecciona fechas válidas para crear un viaje');\n      return;\n    }\n    if (!startDate || !endDate) {\n      setErrorMsg('Selecciona fechas de inicio y fin');\n      return;\n    }\n    if (!searchCity) {\n      setErrorMsg('Por favor, ingresa una ciudad de destino');\n      return;\n    }\n    try {\n      const validStartDate = new Date(startDate.getTime());\n      const validEndDate = new Date(endDate.getTime());\n      if (validEndDate < validStartDate) {\n        setErrorMsg('La fecha de fin no puede ser anterior a la fecha de inicio');\n        return;\n      }\n      setIsLoading(true);\n      setErrorMsg(null);\n      setCurrentStep(`Preparando tu viaje a ${searchCity.toUpperCase()}...`);\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      setCurrentStep(`Buscando lugares interesantes en ${searchCity.toUpperCase()}...`);\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      setCurrentStep(`Creando ${missionCountNum} misiones emocionantes...`);\n      const result = await generateMission(searchCity.toUpperCase(), duration, missionCountNum, user.id, validStartDate, validEndDate);\n      if (!result.journeyId) {\n        throw new Error('No se recibió el ID del journey');\n      }\n      setCurrentStep('¡Aventura generada con éxito!');\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      setGeneratedJourneyId(result.journeyId);\n      setShowShareModal(true);\n    } catch (error) {\n      console.error('Error generando misiones:', error);\n      setErrorMsg('Error al generar las misiones. Por favor, intenta de nuevo.');\n    } finally {\n      setIsLoading(false);\n      setCurrentStep('');\n    }\n  };\n  const onDatesChange = dates => {\n    const [start, end] = dates;\n    console.log('MapScreen - Fechas seleccionadas:', {\n      start,\n      end\n    });\n    setStartDate(start);\n    setEndDate(end);\n    if (start && end) {\n      const diffTime = Math.abs(end.getTime() - start.getTime());\n      const newDuration = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n      console.log('Nueva duración calculada:', newDuration);\n      setDuration(newDuration);\n    } else {\n      setDuration(0);\n    }\n  };\n  const DateRangePicker = Platform.OS === 'web' ? DateRangePickerWeb : DateRangePickerMobile;\n  return _jsxDEV(View, {\n    style: styles.container,\n    children: [_jsxDEV(View, {\n      style: styles.searchContainer,\n      children: [_jsxDEV(TextInput, {\n        style: styles.input,\n        placeholder: \"Buscar ciudad\",\n        value: searchCity,\n        onChangeText: handleCitySearch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 960,\n        columnNumber: 9\n      }, this), showSuggestions && filteredCities.length > 0 && _jsxDEV(View, {\n        style: styles.suggestionsList,\n        children: filteredCities.map(city => _jsxDEV(TouchableOpacity, {\n          style: styles.suggestionItem,\n          onPress: () => handleCitySelect(city),\n          children: _jsxDEV(Text, {\n            style: styles.suggestionText,\n            children: city.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 974,\n            columnNumber: 17\n          }, this)\n        }, city.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 969,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 967,\n        columnNumber: 11\n      }, this), _jsxDEV(TextInput, {\n        style: styles.input,\n        placeholder: \"N\\xFAmero de misiones\",\n        value: missionCount,\n        onChangeText: setMissionCount,\n        keyboardType: \"numeric\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 979,\n        columnNumber: 9\n      }, this), _jsxDEV(DateRangePicker, {\n        startDateProp: startDate,\n        endDateProp: endDate,\n        onDatesChange: onDatesChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 987,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: styles.durationText,\n        children: [\"Duraci\\xF3n del viaje: \", calculateDuration(startDate, endDate), \" d\\xEDas\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 993,\n        columnNumber: 9\n      }, this), _jsxDEV(TouchableOpacity, {\n        style: [styles.button, isLoading && styles.buttonDisabled],\n        onPress: handleSearch,\n        disabled: isLoading,\n        children: _jsxDEV(Text, {\n          style: styles.buttonText,\n          children: isLoading ? 'Generando...' : 'Buscar Aventuras'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1002,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 997,\n        columnNumber: 9\n      }, this), errorMsg ? _jsxDEV(Text, {\n        style: styles.errorText,\n        children: errorMsg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1007,\n        columnNumber: 21\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 959,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: styles.mapContainer,\n      children: isLoadingLocation ? _jsxDEV(View, {\n        style: styles.loadingContainer,\n        children: [_jsxDEV(ActivityIndicator, {\n          size: \"large\",\n          color: \"#4CAF50\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1013,\n          columnNumber: 13\n        }, this), _jsxDEV(Text, {\n          style: styles.loadingText,\n          children: \"Obteniendo ubicaci\\xF3n...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1014,\n          columnNumber: 13\n        }, this), errorLocationMsg && _jsxDEV(Text, {\n          style: styles.errorText,\n          children: errorLocationMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1016,\n          columnNumber: 15\n        }, this), _jsxDEV(TouchableOpacity, {\n          style: styles.retryButton,\n          onPress: () => {\n            console.log('Reintentando obtener ubicación...');\n            setIsLoadingLocation(true);\n            setErrorLocationMsg(null);\n            (async () => {\n              try {\n                const {\n                  status\n                } = await Location.requestForegroundPermissionsAsync();\n                if (status !== 'granted') {\n                  throw new Error('Permiso de ubicación denegado');\n                }\n                const location = await Location.getCurrentPositionAsync({\n                  accuracy: Location.Accuracy.Balanced\n                });\n                console.log('Nueva ubicación obtenida:', JSON.stringify(location.coords));\n                setUserLocation({\n                  latitude: location.coords.latitude,\n                  longitude: location.coords.longitude\n                });\n                setRegion({\n                  latitude: location.coords.latitude,\n                  longitude: location.coords.longitude,\n                  latitudeDelta: 0.0922,\n                  longitudeDelta: 0.0421\n                });\n                setIsLoadingLocation(false);\n              } catch (error) {\n                console.error('Error al reintentar obtener ubicación:', error);\n                setErrorLocationMsg(`Error: ${error.message}`);\n                setIsLoadingLocation(false);\n                setUserLocation({\n                  latitude: 40.416775,\n                  longitude: -3.703790\n                });\n              }\n            })();\n          },\n          children: _jsxDEV(Text, {\n            style: styles.retryButtonText,\n            children: \"Reintentar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1064,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1018,\n          columnNumber: 13\n        }, this), _jsxDEV(TouchableOpacity, {\n          style: [styles.retryButton, {\n            marginTop: 10,\n            backgroundColor: '#FFA000'\n          }],\n          onPress: () => {\n            console.log('Usando ubicación por defecto...');\n            setUserLocation({\n              latitude: 40.416775,\n              longitude: -3.703790\n            });\n            setRegion({\n              latitude: 40.416775,\n              longitude: -3.703790,\n              latitudeDelta: 0.0922,\n              longitudeDelta: 0.0421\n            });\n            setIsLoadingLocation(false);\n          },\n          children: _jsxDEV(Text, {\n            style: styles.retryButtonText,\n            children: \"Usar ubicaci\\xF3n por defecto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1084,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1067,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1012,\n        columnNumber: 11\n      }, this) : _jsxDEV(View, {\n        style: {\n          flex: 1,\n          width: '100%'\n        },\n        children: [errorLocationMsg && _jsxDEV(View, {\n          style: styles.errorOverlay,\n          children: _jsxDEV(Text, {\n            style: styles.errorText,\n            children: errorLocationMsg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1091,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1090,\n          columnNumber: 15\n        }, this), _jsxDEV(GlobeView, {\n          style: styles.map\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1094,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1088,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1010,\n      columnNumber: 7\n    }, this), _jsxDEV(LoadingModal, {\n      visible: isLoading,\n      currentStep: currentStep\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1099,\n      columnNumber: 7\n    }, this), _jsxDEV(FriendSelectionModal, {\n      visible: showShareModal,\n      onClose: () => {\n        setShowShareModal(false);\n        if (generatedJourneyId) {\n          navigation.navigate('Missions', {\n            journeyId: generatedJourneyId,\n            challenges: []\n          });\n          setGeneratedJourneyId(null);\n        }\n      },\n      onSelect: handleShareJourney\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1101,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 958,\n    columnNumber: 5\n  }, this);\n};\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5'\n  },\n  searchContainer: {\n    backgroundColor: 'white',\n    padding: 15,\n    borderBottomLeftRadius: 20,\n    borderBottomRightRadius: 20,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5,\n    zIndex: 9999,\n    position: 'relative'\n  },\n  mapContainer: {\n    flex: 1,\n    marginTop: 10\n  },\n  map: {\n    width: '100%',\n    height: '100%'\n  },\n  input: {\n    height: 40,\n    borderColor: '#ddd',\n    borderWidth: 1,\n    borderRadius: 5,\n    marginBottom: 10,\n    paddingHorizontal: 10,\n    backgroundColor: 'white'\n  },\n  button: {\n    backgroundColor: '#4CAF50',\n    padding: 15,\n    borderRadius: 5,\n    alignItems: 'center'\n  },\n  buttonDisabled: {\n    backgroundColor: '#cccccc'\n  },\n  buttonText: {\n    color: 'white',\n    fontWeight: 'bold'\n  },\n  errorText: {\n    color: 'red',\n    marginTop: 10,\n    textAlign: 'center'\n  },\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)'\n  },\n  loadingCard: {\n    backgroundColor: 'white',\n    padding: 20,\n    borderRadius: 15,\n    alignItems: 'center',\n    width: '80%',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5\n  },\n  loadingTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n    marginTop: 15,\n    marginBottom: 10\n  },\n  loadingStep: {\n    fontSize: 16,\n    color: '#666',\n    textAlign: 'center',\n    marginTop: 10\n  },\n  datePickersRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 10,\n    backgroundColor: 'white',\n    borderRadius: 8,\n    padding: 15,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 3.84,\n    elevation: 2\n  },\n  datePickerContainer: Object.assign({\n    position: 'relative',\n    zIndex: 9999,\n    backgroundColor: 'white',\n    borderRadius: 8,\n    padding: 8,\n    marginBottom: 16,\n    overflow: 'visible'\n  }, Platform.select({\n    web: {\n      boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n    },\n    default: {\n      elevation: 2,\n      shadowColor: '#000',\n      shadowOffset: {\n        width: 0,\n        height: 2\n      },\n      shadowOpacity: 0.1,\n      shadowRadius: 4\n    }\n  })),\n  datePickerButton: {\n    backgroundColor: '#005F9E',\n    borderRadius: 8,\n    padding: 12\n  },\n  datePickerContent: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  },\n  datePickerText: {\n    color: 'white',\n    fontSize: 16\n  },\n  calendarDropdown: {\n    backgroundColor: 'white',\n    borderRadius: 8,\n    padding: 15,\n    marginTop: 8,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 10,\n    elevation: 5\n  },\n  durationText: {\n    textAlign: 'center',\n    marginBottom: 10,\n    color: '#666'\n  },\n  dateRangeContainer: {\n    backgroundColor: 'white',\n    borderRadius: 8,\n    padding: 15,\n    marginBottom: 15,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 3.84,\n    elevation: 2\n  },\n  suggestionsList: {\n    position: 'absolute',\n    top: '100%',\n    left: 0,\n    right: 0,\n    backgroundColor: 'white',\n    borderRadius: 5,\n    maxHeight: 200,\n    zIndex: 2,\n    elevation: 5,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84\n  },\n  suggestionItem: {\n    padding: 15,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee'\n  },\n  suggestionText: {\n    fontSize: 16,\n    color: '#333'\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  loadingText: {\n    marginTop: 10,\n    color: '#666'\n  },\n  retryButton: {\n    backgroundColor: '#4CAF50',\n    padding: 10,\n    borderRadius: 5,\n    marginTop: 10\n  },\n  retryButtonText: {\n    color: 'white',\n    textAlign: 'center',\n    fontWeight: 'bold'\n  },\n  errorOverlay: {\n    position: 'absolute',\n    top: 10,\n    left: 10,\n    right: 10,\n    backgroundColor: 'rgba(244, 67, 54, 0.9)',\n    padding: 10,\n    borderRadius: 5\n  },\n  progressBar: {\n    height: 8,\n    width: '100%',\n    backgroundColor: '#f0f0f0',\n    borderRadius: 10,\n    overflow: 'hidden',\n    marginTop: 20,\n    marginBottom: 10\n  },\n  progressFill: {\n    height: '100%',\n    backgroundColor: '#4CAF50',\n    borderRadius: 10\n  }\n});\nexport default MapScreen;","map":{"version":3,"names":["React","useState","useEffect","View","StyleSheet","TextInput","TouchableOpacity","Text","Dimensions","Platform","Modal","ActivityIndicator","FlatList","useDispatch","useSelector","Location","useNavigation","generateMission","Ionicons","Calendar","format","searchCities","GlobeView","supabase","shareJourney","jsxDEV","_jsxDEV","width","height","get","LoadingModal","visible","currentStep","transparent","animationType","children","style","styles","modalContainer","loadingCard","size","color","fileName","_jsxFileName","lineNumber","columnNumber","loadingTitle","loadingStep","progressBar","progressFill","includes","DateRangePickerMobile","startDateProp","endDateProp","onDatesChange","startDate","setStartDate","endDate","setEndDate","isOpen","setIsOpen","selectedDates","setSelectedDates","updateMarkedDates","start","end","newMarkedDates","startStr","startingDay","textColor","endStr","endingDay","currentDate","Date","setDate","getDate","dateStr","handleDayPress","day","selectedDate","dateString","newStart","newEnd","calculateDuration","diffTime","Math","abs","getTime","ceil","formatDateRange","formatDate","date","duration","datePickerContainer","datePickerButton","onPress","datePickerContent","datePickerText","name","calendarDropdown","minDate","toISOString","split","onDayPress","markingType","markedDates","theme","calendarBackground","textSectionTitleColor","selectedDayBackgroundColor","selectedDayTextColor","todayTextColor","dayTextColor","textDisabledColor","dotColor","selectedDotColor","arrowColor","monthTextColor","indicatorColor","DateRangePickerWeb","currentMonth","setCurrentMonth","generateCalendar","year","getFullYear","month","getMonth","firstDay","startingDayOfWeek","getDay","lastDay","totalDays","days","i","prevMonthDay","unshift","isCurrentMonth","isToday","isSelected","today","setHours","isStartDate","isEndDate","isInRange","push","remainingDays","length","nextMonthDay","handleDateClick","formatMonth","months","changeMonth","offset","newMonth","setMonth","weekDays","position","top","left","right","backgroundColor","zIndex","boxShadow","borderRadius","marginTop","padding","marginLeft","marginRight","display","justifyContent","marginBottom","flexDirection","alignItems","onClick","background","border","fontSize","cursor","margin","gridTemplateColumns","gap","textAlign","map","fontWeight","index","opacity","FriendSelectionModal","onClose","onSelect","friends","setFriends","loading","setLoading","user","state","auth","fetchFriends","data","friendData","error","from","select","eq","id","friendDetails","Promise","all","friend","userData","userError","user2Id","single","username","points","filter","f","console","onRequestClose","modalStyles","modalOverlay","modalContent","modalTitle","modalSubtitle","keyExtractor","item","renderItem","friendItem","friendName","friendPoints","ListEmptyComponent","emptyText","buttonContainer","cancelButton","cancelButtonText","create","flex","maxHeight","borderBottomWidth","borderBottomColor","minWidth","MapScreen","navigation","dispatch","region","setRegion","latitude","longitude","latitudeDelta","longitudeDelta","searchCity","setSearchCity","missionCount","setMissionCount","showStartDatePicker","setShowStartDatePicker","showEndDatePicker","setShowEndDatePicker","errorMsg","setErrorMsg","isLoading","setIsLoading","setCurrentStep","hasLocationPermission","setHasLocationPermission","isLoadingLocation","setIsLoadingLocation","errorLocationMsg","setErrorLocationMsg","filteredCities","setFilteredCities","showSuggestions","setShowSuggestions","setDuration","userLocation","setUserLocation","showShareModal","setShowShareModal","generatedJourneyId","setGeneratedJourneyId","getLocation","log","status","requestForegroundPermissionsAsync","warn","options","OS","accuracy","Accuracy","Balanced","timeInterval","distanceInterval","mayShowUserSettingsDialog","JSON","stringify","location","getCurrentPositionAsync","coords","locationError","lastLocation","getLastKnownPositionAsync","lastLocError","message","diffDays","handleCitySearch","text","upperText","toUpperCase","cities","handleCitySelect","city","handleShareJourney","success","navigate","journeyId","challenges","handleSearch","missionCountNum","parseInt","validStartDate","validEndDate","resolve","setTimeout","result","Error","dates","newDuration","DateRangePicker","container","searchContainer","input","placeholder","value","onChangeText","suggestionsList","suggestionItem","suggestionText","keyboardType","durationText","button","buttonDisabled","disabled","buttonText","errorText","mapContainer","loadingContainer","loadingText","retryButton","retryButtonText","errorOverlay","borderBottomLeftRadius","borderBottomRightRadius","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","borderColor","borderWidth","paddingHorizontal","datePickersRow","Object","assign","overflow","web","default","dateRangeContainer"],"sources":["C:/Users/PC/TravelQuest/src/screens/main/MapScreen.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, StyleSheet, TextInput, TouchableOpacity, Text, Dimensions, Platform, Modal, ActivityIndicator, Alert, ScrollView, FlatList } from 'react-native';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootState } from '../../features/store';\nimport Map from '../../components/maps';\nimport * as Location from 'expo-location';\nimport { getMissionsByCityAndDuration } from '../../services/missionService';\nimport { useNavigation } from '@react-navigation/native';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport generateMission from '../../services/missionGenerator';\nimport { Ionicons } from '@expo/vector-icons';\nimport { Calendar } from 'react-native-calendars';\nimport { format } from 'date-fns';\nimport { searchCities } from '../../services/supabase';\nimport GlobeView from '../../components/GlobeView';\nimport { supabase } from '../../services/supabase';\nimport { shareJourney } from '../../services/shareService';\n\ninterface City {\n  id: string;\n  name: string;\n  latitude: number;\n  longitude: number;\n}\n\ninterface Friend {\n  user2Id: string;\n  username: string;\n  points: number;\n}\n\ntype RootStackParamList = {\n  Missions: {\n    journeyId: string;\n    challenges: any[];\n  };\n};\n\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList>;\n\nconst { width, height } = Dimensions.get('window');\n\nconst LoadingModal = ({ visible, currentStep }: { visible: boolean; currentStep: string }) => (\n  <Modal\n    transparent={true}\n    visible={visible}\n    animationType=\"fade\"\n  >\n    <View style={styles.modalContainer}>\n      <View style={styles.loadingCard}>\n        <ActivityIndicator size=\"large\" color=\"#4CAF50\" />\n        <Text style={styles.loadingTitle}>Generando tu aventura</Text>\n        <Text style={styles.loadingStep}>{currentStep}</Text>\n\n        {/* Indicador de progreso visual */}\n        <View style={styles.progressBar}>\n          <View style={[\n            styles.progressFill,\n            {\n              width: currentStep.includes('Preparando') ? '30%' :\n                currentStep.includes('Buscando') ? '60%' :\n                  currentStep.includes('Creando') ? '90%' : '10%'\n            }\n          ]} />\n        </View>\n      </View>\n    </View>\n  </Modal>\n);\n\nconst DateRangePickerMobile: React.FC<{\n  startDateProp: Date | null;\n  endDateProp: Date | null;\n  onDatesChange: (dates: [Date | null, Date | null]) => void;\n}> = ({ startDateProp, endDateProp, onDatesChange }) => {\n  const [startDate, setStartDate] = useState<Date | null>(startDateProp);\n  const [endDate, setEndDate] = useState<Date | null>(endDateProp);\n  const [isOpen, setIsOpen] = useState(false);\n  const [selectedDates, setSelectedDates] = useState<{ [date: string]: any }>({});\n\n  useEffect(() => {\n    setStartDate(startDateProp);\n    setEndDate(endDateProp);\n\n    if (startDateProp || endDateProp) {\n      updateMarkedDates(startDateProp, endDateProp);\n    }\n  }, [startDateProp, endDateProp]);\n\n  const updateMarkedDates = (start: Date | null, end: Date | null) => {\n    const newMarkedDates: { [date: string]: any } = {};\n\n    if (start) {\n      const startStr = format(start, 'yyyy-MM-dd');\n      newMarkedDates[startStr] = {\n        startingDay: true,\n        color: '#005F9E',\n        textColor: 'white'\n      };\n    }\n\n    if (end) {\n      const endStr = format(end, 'yyyy-MM-dd');\n      newMarkedDates[endStr] = {\n        endingDay: true,\n        color: '#005F9E',\n        textColor: 'white'\n      };\n    }\n\n    if (start && end) {\n      let currentDate = new Date(start);\n      currentDate.setDate(currentDate.getDate() + 1);\n\n      while (currentDate < end) {\n        const dateStr = format(currentDate, 'yyyy-MM-dd');\n        newMarkedDates[dateStr] = {\n          color: '#e5f3ff',\n          textColor: '#005F9E'\n        };\n        currentDate.setDate(currentDate.getDate() + 1);\n      }\n    }\n\n    setSelectedDates(newMarkedDates);\n  };\n\n  const handleDayPress = (day: any) => {\n    const selectedDate = new Date(day.dateString);\n\n    if (!startDate || (startDate && endDate)) {\n      const newStart = selectedDate;\n      setStartDate(newStart);\n      setEndDate(null);\n      updateMarkedDates(newStart, null);\n      onDatesChange([newStart, null]);\n    } else {\n      if (selectedDate < startDate) {\n        const newEnd = new Date(startDate);\n        setEndDate(newEnd);\n        setStartDate(selectedDate);\n        updateMarkedDates(selectedDate, newEnd);\n        onDatesChange([selectedDate, newEnd]);\n      } else {\n        setEndDate(selectedDate);\n        updateMarkedDates(startDate, selectedDate);\n        onDatesChange([startDate, selectedDate]);\n      }\n    }\n  };\n\n  const calculateDuration = (start: Date | null, end: Date | null): number => {\n    if (!start || !end) return 0;\n    const diffTime = Math.abs(end.getTime() - start.getTime());\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  };\n\n  const formatDateRange = (): string => {\n    if (!startDate && !endDate) {\n      return 'Selecciona fechas';\n    }\n\n    const formatDate = (date: Date | null): string => {\n      if (!date) return '';\n      return format(date, 'dd MMM');\n    };\n\n    const duration = calculateDuration(startDate, endDate);\n    const startStr = formatDate(startDate);\n    const endStr = formatDate(endDate);\n\n    if (startStr && endStr) {\n      return `${startStr} - ${endStr} · ${duration} noches`;\n    } else if (startStr) {\n      return `${startStr} - Selecciona fecha final`;\n    } else {\n      return 'Selecciona fechas';\n    }\n  };\n\n  return (\n    <View style={styles.datePickerContainer}>\n      <TouchableOpacity\n        style={styles.datePickerButton}\n        onPress={() => setIsOpen(!isOpen)}\n      >\n        <View style={styles.datePickerContent}>\n          <Text style={styles.datePickerText}>{formatDateRange()}</Text>\n          <Ionicons name={isOpen ? 'chevron-up' : 'chevron-down'} size={24} color=\"white\" />\n        </View>\n      </TouchableOpacity>\n      {isOpen && (\n        <View style={styles.calendarDropdown}>\n          <Calendar\n            minDate={new Date().toISOString().split('T')[0]}\n            onDayPress={handleDayPress}\n            markingType=\"period\"\n            markedDates={selectedDates}\n            theme={{\n              calendarBackground: '#ffffff',\n              textSectionTitleColor: '#b6c1cd',\n              selectedDayBackgroundColor: '#005F9E',\n              selectedDayTextColor: '#ffffff',\n              todayTextColor: '#005F9E',\n              dayTextColor: '#2d4150',\n              textDisabledColor: '#d9e1e8',\n              dotColor: '#005F9E',\n              selectedDotColor: '#ffffff',\n              arrowColor: '#005F9E',\n              monthTextColor: '#005F9E',\n              indicatorColor: '#005F9E',\n            }}\n          />\n        </View>\n      )}\n    </View>\n  );\n};\n\n// En lugar de usar react-datepicker, crear un componente propio para web\nconst DateRangePickerWeb: React.FC<{\n  startDateProp: Date | null;\n  endDateProp: Date | null;\n  onDatesChange: (dates: [Date | null, Date | null]) => void;\n}> = ({ startDateProp, endDateProp, onDatesChange }) => {\n  const [startDate, setStartDate] = useState<Date | null>(startDateProp);\n  const [endDate, setEndDate] = useState<Date | null>(endDateProp);\n  const [isOpen, setIsOpen] = useState(false);\n  const [currentMonth, setCurrentMonth] = useState(new Date());\n\n  useEffect(() => {\n    setStartDate(startDateProp);\n    setEndDate(endDateProp);\n  }, [startDateProp, endDateProp]);\n\n  // Función para generar el calendario\n  const generateCalendar = (date: Date) => {\n    const year = date.getFullYear();\n    const month = date.getMonth();\n\n    // Obtener el primer día del mes\n    const firstDay = new Date(year, month, 1);\n    const startingDayOfWeek = firstDay.getDay(); // 0 = domingo\n\n    // Obtener el último día del mes\n    const lastDay = new Date(year, month + 1, 0);\n    const totalDays = lastDay.getDate();\n\n    // Crear un array para los días del mes\n    const days = [];\n\n    // Agregar días del mes anterior para completar la primera semana\n    for (let i = 0; i < startingDayOfWeek; i++) {\n      const prevMonthDay = new Date(year, month, -i);\n      days.unshift({\n        date: prevMonthDay,\n        isCurrentMonth: false,\n        isToday: false,\n        isSelected: false\n      });\n    }\n\n    // Agregar los días del mes actual\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n\n    for (let i = 1; i <= totalDays; i++) {\n      const currentDate = new Date(year, month, i);\n      currentDate.setHours(0, 0, 0, 0);\n\n      const isToday = currentDate.getTime() === today.getTime();\n      const isStartDate = startDate && currentDate.getTime() === new Date(startDate).setHours(0, 0, 0, 0);\n      const isEndDate = endDate && currentDate.getTime() === new Date(endDate).setHours(0, 0, 0, 0);\n      const isInRange = startDate && endDate &&\n        currentDate.getTime() > new Date(startDate).setHours(0, 0, 0, 0) &&\n        currentDate.getTime() < new Date(endDate).setHours(0, 0, 0, 0);\n\n      days.push({\n        date: currentDate,\n        isCurrentMonth: true,\n        isToday,\n        isSelected: isStartDate || isEndDate,\n        isStartDate,\n        isEndDate,\n        isInRange\n      });\n    }\n\n    // Agregar días del mes siguiente para completar la última semana\n    const remainingDays = 7 - (days.length % 7);\n    if (remainingDays < 7) {\n      for (let i = 1; i <= remainingDays; i++) {\n        const nextMonthDay = new Date(year, month + 1, i);\n        days.push({\n          date: nextMonthDay,\n          isCurrentMonth: false,\n          isToday: false,\n          isSelected: false\n        });\n      }\n    }\n\n    return days;\n  };\n\n  const handleDateClick = (date: Date) => {\n    // No permitir seleccionar fechas en el pasado\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n\n    if (date < today) {\n      return;\n    }\n\n    if (!startDate || (startDate && endDate)) {\n      // Si no hay fecha de inicio o ambas fechas están seleccionadas, establecer como nueva fecha de inicio\n      setStartDate(date);\n      setEndDate(null);\n      onDatesChange([date, null]);\n    } else {\n      // Si solo hay fecha de inicio, establecer como fecha de fin\n      if (date < startDate) {\n        // Si la fecha seleccionada es anterior a la fecha de inicio, intercambiarlas\n        setEndDate(new Date(startDate));\n        setStartDate(date);\n        onDatesChange([date, startDate]);\n      } else {\n        setEndDate(date);\n        onDatesChange([startDate, date]);\n      }\n    }\n  };\n\n  const formatMonth = (date: Date) => {\n    const months = [\n      'Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio',\n      'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'\n    ];\n    return `${months[date.getMonth()]} ${date.getFullYear()}`;\n  };\n\n  const changeMonth = (offset: number) => {\n    const newMonth = new Date(currentMonth);\n    newMonth.setMonth(newMonth.getMonth() + offset);\n    setCurrentMonth(newMonth);\n  };\n\n  const days = generateCalendar(currentMonth);\n  const weekDays = ['Dom', 'Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb'];\n\n  const calculateDuration = (start: Date | null, end: Date | null): number => {\n    if (!start || !end) return 0;\n    const diffTime = Math.abs(end.getTime() - start.getTime());\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  };\n\n  const formatDate = (date: Date | null): string => {\n    if (!date) return '';\n    return `${date.getDate()} ${['ene', 'feb', 'mar', 'abr', 'may', 'jun', 'jul', 'ago', 'sep', 'oct', 'nov', 'dic'][date.getMonth()]}`;\n  };\n\n  const formatDateRange = (): string => {\n    if (!startDate && !endDate) {\n      return 'Selecciona fechas';\n    }\n\n    const startStr = formatDate(startDate);\n    const endStr = formatDate(endDate);\n    const duration = calculateDuration(startDate, endDate);\n\n    if (startStr && endStr) {\n      return `${startStr} - ${endStr} · ${duration} noches`;\n    } else if (startStr) {\n      return `${startStr} - Selecciona fecha final`;\n    } else {\n      return 'Selecciona fechas';\n    }\n  };\n\n  return (\n    <View style={styles.datePickerContainer}>\n      <TouchableOpacity\n        style={styles.datePickerButton}\n        onPress={() => setIsOpen(!isOpen)}\n      >\n        <View style={styles.datePickerContent}>\n          <Text style={styles.datePickerText}>{formatDateRange()}</Text>\n          <Ionicons name={isOpen ? 'chevron-up' : 'chevron-down'} size={24} color=\"white\" />\n        </View>\n      </TouchableOpacity>\n\n      {isOpen && (\n        <div style={{\n          position: 'absolute',\n          top: '100%',\n          left: 0,\n          right: 0,\n          backgroundColor: 'white',\n          zIndex: 9999,\n          boxShadow: '0px 2px 10px rgba(0,0,0,0.1)',\n          borderRadius: 8,\n          marginTop: 4,\n          padding: 15,\n          width: 620,\n          marginLeft: 'auto',\n          marginRight: 'auto'\n        }}>\n          <div style={{\n            display: 'flex',\n            justifyContent: 'space-between',\n            marginBottom: 10\n          }}>\n            <div style={{\n              display: 'flex',\n              flexDirection: 'row',\n              alignItems: 'center'\n            }}>\n              <button\n                onClick={() => changeMonth(-1)}\n                style={{\n                  background: 'none',\n                  border: 'none',\n                  fontSize: 24,\n                  cursor: 'pointer',\n                  color: '#005F9E'\n                }}\n              >\n                &larr;\n              </button>\n              <h3 style={{\n                margin: '0 15px',\n                color: '#005F9E'\n              }}>\n                {formatMonth(currentMonth)}\n              </h3>\n              <button\n                onClick={() => changeMonth(1)}\n                style={{\n                  background: 'none',\n                  border: 'none',\n                  fontSize: 24,\n                  cursor: 'pointer',\n                  color: '#005F9E'\n                }}\n              >\n                &rarr;\n              </button>\n            </div>\n\n            <div style={{\n              display: 'flex',\n              alignItems: 'center'\n            }}>\n              <button\n                onClick={() => {\n                  setStartDate(null);\n                  setEndDate(null);\n                  onDatesChange([null, null]);\n                }}\n                style={{\n                  background: 'none',\n                  border: '1px solid #ddd',\n                  padding: '5px 10px',\n                  borderRadius: 4,\n                  cursor: 'pointer'\n                }}\n              >\n                Limpiar\n              </button>\n            </div>\n          </div>\n\n          <div style={{\n            display: 'grid',\n            gridTemplateColumns: 'repeat(7, 1fr)',\n            gap: 5,\n            textAlign: 'center'\n          }}>\n            {weekDays.map(day => (\n              <div key={day} style={{\n                padding: 5,\n                fontWeight: 'bold',\n                color: '#666'\n              }}>\n                {day}\n              </div>\n            ))}\n\n            {days.map((day, index) => (\n              <div\n                key={index}\n                onClick={() => day.isCurrentMonth && handleDateClick(day.date)}\n                style={{\n                  padding: 10,\n                  cursor: day.isCurrentMonth ? 'pointer' : 'default',\n                  backgroundColor: day.isStartDate || day.isEndDate\n                    ? '#005F9E'\n                    : day.isInRange\n                      ? '#e5f3ff'\n                      : 'transparent',\n                  color: day.isStartDate || day.isEndDate\n                    ? 'white'\n                    : !day.isCurrentMonth\n                      ? '#ccc'\n                      : day.isToday\n                        ? '#005F9E'\n                        : '#333',\n                  fontWeight: day.isToday ? 'bold' : 'normal',\n                  borderRadius: 4,\n                  opacity: day.isCurrentMonth ? 1 : 0.5\n                }}\n              >\n                {day.date.getDate()}\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </View>\n  );\n};\n\nconst FriendSelectionModal = ({ visible, onClose, onSelect }: {\n  visible: boolean;\n  onClose: () => void;\n  onSelect: (friend: Friend) => void;\n}) => {\n  const [friends, setFriends] = useState<Friend[]>([]);\n  const [loading, setLoading] = useState(true);\n  const user = useSelector((state: RootState) => state.auth.user);\n\n  useEffect(() => {\n    if (visible) {\n      const fetchFriends = async () => {\n        if (!user) {\n          setLoading(false);\n          return;\n        }\n        try {\n          setLoading(true);\n          const { data: friendData, error } = await supabase\n            .from('friends')\n            .select('user2Id')\n            .eq('user1Id', user.id);\n          if (error) throw error;\n\n          const friendDetails = await Promise.all(\n            friendData.map(async (friend: { user2Id: string }) => {\n              const { data: userData, error: userError } = await supabase\n                .from('users')\n                .select('username, points')\n                .eq('id', friend.user2Id)\n                .single();\n              if (userError) return null;\n              return {\n                user2Id: friend.user2Id,\n                username: userData.username,\n                points: userData.points,\n              };\n            })\n          );\n\n          setFriends(friendDetails.filter((f) => f !== null) as Friend[]);\n        } catch (error) {\n          console.error('Error fetching friends:', error);\n        } finally {\n          setLoading(false);\n        }\n      };\n      fetchFriends();\n    }\n  }, [visible, user]);\n\n  return (\n    <Modal visible={visible} animationType=\"slide\" onRequestClose={onClose} transparent>\n      <View style={modalStyles.modalOverlay}>\n        <View style={modalStyles.modalContent}>\n          <Text style={modalStyles.modalTitle}>¿Quieres compartir tu aventura?</Text>\n          <Text style={modalStyles.modalSubtitle}>Selecciona un amigo para compartir este viaje</Text>\n          {loading ? (\n            <ActivityIndicator size=\"large\" color=\"#4CAF50\" />\n          ) : (\n            <FlatList\n              data={friends}\n              keyExtractor={(item) => item.user2Id}\n              renderItem={({ item }) => (\n                <TouchableOpacity style={modalStyles.friendItem} onPress={() => onSelect(item)}>\n                  <Text style={modalStyles.friendName}>{item.username}</Text>\n                  <Text style={modalStyles.friendPoints}>Puntos: {item.points}</Text>\n                </TouchableOpacity>\n              )}\n              ListEmptyComponent={\n                <Text style={modalStyles.emptyText}>No tienes amigos agregados</Text>\n              }\n            />\n          )}\n          <View style={modalStyles.buttonContainer}>\n            <TouchableOpacity style={modalStyles.cancelButton} onPress={onClose}>\n              <Text style={modalStyles.cancelButtonText}>No compartir</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nconst modalStyles = StyleSheet.create({\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  modalContent: {\n    width: '80%',\n    backgroundColor: 'white',\n    borderRadius: 10,\n    padding: 20,\n    maxHeight: '80%'\n  },\n  modalTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginBottom: 10,\n    textAlign: 'center'\n  },\n  modalSubtitle: {\n    fontSize: 16,\n    color: '#666',\n    marginBottom: 20,\n    textAlign: 'center'\n  },\n  friendItem: {\n    padding: 15,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee'\n  },\n  friendName: {\n    fontSize: 16,\n    fontWeight: '500'\n  },\n  friendPoints: {\n    fontSize: 14,\n    color: '#666',\n    marginTop: 4\n  },\n  buttonContainer: {\n    marginTop: 20,\n    flexDirection: 'row',\n    justifyContent: 'center'\n  },\n  cancelButton: {\n    backgroundColor: '#f44336',\n    padding: 12,\n    borderRadius: 5,\n    minWidth: 120,\n    alignItems: 'center'\n  },\n  cancelButtonText: {\n    color: 'white',\n    fontWeight: 'bold'\n  },\n  emptyText: {\n    textAlign: 'center',\n    color: '#666',\n    padding: 20\n  }\n});\n\nconst MapScreen = () => {\n  const navigation = useNavigation<NavigationProp>();\n  const dispatch = useDispatch();\n  const { user } = useSelector((state: RootState) => state.auth);\n  const [region, setRegion] = useState({\n    latitude: 40.416775,\n    longitude: -3.703790,\n    latitudeDelta: 0.0922,\n    longitudeDelta: 0.0421,\n  });\n  const [searchCity, setSearchCity] = useState('');\n  const [missionCount, setMissionCount] = useState('');\n  const [startDate, setStartDate] = useState<Date | null>(null);\n  const [endDate, setEndDate] = useState<Date | null>(null);\n  const [showStartDatePicker, setShowStartDatePicker] = useState(false);\n  const [showEndDatePicker, setShowEndDatePicker] = useState(false);\n  const [errorMsg, setErrorMsg] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [currentStep, setCurrentStep] = useState('');\n  const [hasLocationPermission, setHasLocationPermission] = useState(false);\n  const [isLoadingLocation, setIsLoadingLocation] = useState(true);\n  const [errorLocationMsg, setErrorLocationMsg] = useState<string | null>(null);\n  const [filteredCities, setFilteredCities] = useState<City[]>([]);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [duration, setDuration] = useState<number>(0);\n  const [userLocation, setUserLocation] = useState<{ latitude: number; longitude: number } | null>(null);\n  const [showShareModal, setShowShareModal] = useState(false);\n  const [generatedJourneyId, setGeneratedJourneyId] = useState<string | null>(null);\n\n  useEffect(() => {\n    const getLocation = async () => {\n      try {\n        setIsLoadingLocation(true);\n        setErrorLocationMsg(null);\n\n        console.log('Solicitando permisos de ubicación...');\n        let { status } = await Location.requestForegroundPermissionsAsync();\n        console.log('Estado de permisos de ubicación:', status);\n\n        if (status !== 'granted') {\n          console.warn('Permiso de ubicación denegado');\n          setErrorLocationMsg('Permiso de ubicación denegado. La aplicación necesita acceso a tu ubicación para funcionar correctamente.');\n          setIsLoadingLocation(false);\n          return;\n        }\n\n        console.log('Permisos concedidos, obteniendo ubicación actual...');\n\n        // Configurar opciones para obtener la ubicación para Android\n        const options = Platform.OS === 'android' ? {\n          accuracy: Location.Accuracy.Balanced,\n          timeInterval: 10000,  // 10 segundos entre actualizaciones\n          distanceInterval: 10, // 10 metros mínimo entre actualizaciones\n          mayShowUserSettingsDialog: true, // Mostrar diálogo de configuración si es necesario\n        } : {\n          accuracy: Location.Accuracy.Balanced\n        };\n\n        console.log('Usando opciones de ubicación:', JSON.stringify(options));\n\n        try {\n          console.log('Intentando obtener ubicación...');\n          let location = await Location.getCurrentPositionAsync(options);\n          console.log('Ubicación obtenida:', JSON.stringify(location.coords));\n\n          // Actualizar estado con la ubicación obtenida\n          setUserLocation({\n            latitude: location.coords.latitude,\n            longitude: location.coords.longitude,\n          });\n\n          // Actualizar el estado de la región del mapa\n          setRegion({\n            latitude: location.coords.latitude,\n            longitude: location.coords.longitude,\n            latitudeDelta: 0.0922,\n            longitudeDelta: 0.0421,\n          });\n\n          setIsLoadingLocation(false);\n        } catch (locationError: any) {\n          console.error('Error específico al obtener ubicación:', locationError);\n\n          // Intentar con el método getLastKnownPositionAsync como fallback\n          console.log('Intentando obtener última ubicación conocida...');\n          try {\n            const lastLocation = await Location.getLastKnownPositionAsync();\n            if (lastLocation) {\n              console.log('Última ubicación conocida:', JSON.stringify(lastLocation.coords));\n              setUserLocation({\n                latitude: lastLocation.coords.latitude,\n                longitude: lastLocation.coords.longitude,\n              });\n\n              setRegion({\n                latitude: lastLocation.coords.latitude,\n                longitude: lastLocation.coords.longitude,\n                latitudeDelta: 0.0922,\n                longitudeDelta: 0.0421,\n              });\n\n              setIsLoadingLocation(false);\n              return;\n            }\n          } catch (lastLocError) {\n            console.error('Error al obtener última ubicación conocida:', lastLocError);\n          }\n\n          throw locationError; // Propagar el error original si no pudimos recuperar\n        }\n      } catch (error: any) {\n        console.error('Error al obtener la ubicación:', error);\n        setErrorLocationMsg(`Error al obtener la ubicación: ${error.message}. Usando ubicación por defecto.`);\n        setIsLoadingLocation(false);\n\n        // Usar una ubicación por defecto en caso de error\n        setUserLocation({\n          latitude: 40.416775,\n          longitude: -3.703790,\n        });\n        setRegion({\n          latitude: 40.416775,\n          longitude: -3.703790,\n          latitudeDelta: 0.0922,\n          longitudeDelta: 0.0421,\n        });\n      }\n    };\n\n    getLocation();\n  }, []);\n\n  const calculateDuration = (start: Date | null, end: Date | null) => {\n    if (!start || !end) return 0;\n    const diffTime = Math.abs(end.getTime() - start.getTime());\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return diffDays;\n  };\n\n  const handleCitySearch = async (text: string) => {\n    const upperText = text.toUpperCase();\n    setSearchCity(upperText);\n\n    if (text.length > 2) {\n      try {\n        const cities = await searchCities(upperText);\n        setFilteredCities(cities);\n        setShowSuggestions(true);\n      } catch (error) {\n        console.error('Error searching cities:', error);\n        setFilteredCities([]);\n      }\n    } else {\n      setFilteredCities([]);\n      setShowSuggestions(false);\n    }\n  };\n\n  const handleCitySelect = (city: City) => {\n    setSearchCity(city.name.toUpperCase());\n    setShowSuggestions(false);\n    setRegion({\n      latitude: city.latitude,\n      longitude: city.longitude,\n      latitudeDelta: 0.0922,\n      longitudeDelta: 0.0421,\n    });\n  };\n\n  const handleShareJourney = async (friend: Friend) => {\n    if (!generatedJourneyId || !user?.id) return;\n\n    const success = await shareJourney(generatedJourneyId, user.id, friend);\n\n    if (success) {\n      navigation.navigate('Missions', {\n        journeyId: generatedJourneyId,\n        challenges: []\n      });\n    }\n\n    setShowShareModal(false);\n    setGeneratedJourneyId(null);\n  };\n\n  const handleSearch = async () => {\n    if (!user?.id) {\n      setErrorMsg('Debes iniciar sesión para generar misiones');\n      return;\n    }\n\n    const missionCountNum = parseInt(missionCount) || 3; // Usar 3 como valor por defecto si no hay número\n\n    if (!duration || duration <= 0) {\n      setErrorMsg('Por favor, selecciona fechas válidas para crear un viaje');\n      return;\n    }\n\n    if (!startDate || !endDate) {\n      setErrorMsg('Selecciona fechas de inicio y fin');\n      return;\n    }\n\n    if (!searchCity) {\n      setErrorMsg('Por favor, ingresa una ciudad de destino');\n      return;\n    }\n\n    try {\n      const validStartDate = new Date(startDate.getTime());\n      const validEndDate = new Date(endDate.getTime());\n\n      if (validEndDate < validStartDate) {\n        setErrorMsg('La fecha de fin no puede ser anterior a la fecha de inicio');\n        return;\n      }\n\n      // Iniciar el proceso de generación\n      setIsLoading(true);\n      setErrorMsg(null);\n\n      // Paso 1: Preparando el viaje\n      setCurrentStep(`Preparando tu viaje a ${searchCity.toUpperCase()}...`);\n      await new Promise(resolve => setTimeout(resolve, 1500));\n\n      // Paso 2: Buscando lugares\n      setCurrentStep(`Buscando lugares interesantes en ${searchCity.toUpperCase()}...`);\n      await new Promise(resolve => setTimeout(resolve, 2000));\n\n      // Paso 3: Creando misiones\n      setCurrentStep(`Creando ${missionCountNum} misiones emocionantes...`);\n\n      // Llamar a la API para generar las misiones\n      const result = await generateMission(\n        searchCity.toUpperCase(),\n        duration,\n        missionCountNum,\n        user.id,\n        validStartDate,\n        validEndDate\n      );\n\n      if (!result.journeyId) {\n        throw new Error('No se recibió el ID del journey');\n      }\n\n      // Paso final: Completado\n      setCurrentStep('¡Aventura generada con éxito!');\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // Guardar el ID del journey generado\n      setGeneratedJourneyId(result.journeyId);\n\n      // Mostrar el modal de compartir\n      setShowShareModal(true);\n\n    } catch (error) {\n      console.error('Error generando misiones:', error);\n      setErrorMsg('Error al generar las misiones. Por favor, intenta de nuevo.');\n    } finally {\n      setIsLoading(false);\n      setCurrentStep('');\n    }\n  };\n\n  const onDatesChange = (dates: [Date | null, Date | null]) => {\n    const [start, end] = dates;\n\n    console.log('MapScreen - Fechas seleccionadas:', { start, end });\n\n    setStartDate(start);\n    setEndDate(end);\n\n    if (start && end) {\n      const diffTime = Math.abs(end.getTime() - start.getTime());\n      const newDuration = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n      console.log('Nueva duración calculada:', newDuration);\n      setDuration(newDuration);\n    } else {\n      setDuration(0);\n    }\n  };\n\n  // Elegir el componente correcto según la plataforma\n  const DateRangePicker = Platform.OS === 'web' ? DateRangePickerWeb : DateRangePickerMobile;\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.searchContainer}>\n        <TextInput\n          style={styles.input}\n          placeholder=\"Buscar ciudad\"\n          value={searchCity}\n          onChangeText={handleCitySearch}\n        />\n        {showSuggestions && filteredCities.length > 0 && (\n          <View style={styles.suggestionsList}>\n            {filteredCities.map((city) => (\n              <TouchableOpacity\n                key={city.id}\n                style={styles.suggestionItem}\n                onPress={() => handleCitySelect(city)}\n              >\n                <Text style={styles.suggestionText}>{city.name}</Text>\n              </TouchableOpacity>\n            ))}\n          </View>\n        )}\n        <TextInput\n          style={styles.input}\n          placeholder=\"Número de misiones\"\n          value={missionCount}\n          onChangeText={setMissionCount}\n          keyboardType=\"numeric\"\n        />\n\n        <DateRangePicker\n          startDateProp={startDate}\n          endDateProp={endDate}\n          onDatesChange={onDatesChange}\n        />\n\n        <Text style={styles.durationText}>\n          Duración del viaje: {calculateDuration(startDate, endDate)} días\n        </Text>\n\n        <TouchableOpacity\n          style={[styles.button, isLoading && styles.buttonDisabled]}\n          onPress={handleSearch}\n          disabled={isLoading}\n        >\n          <Text style={styles.buttonText}>\n            {isLoading ? 'Generando...' : 'Buscar Aventuras'}\n          </Text>\n        </TouchableOpacity>\n\n        {errorMsg ? <Text style={styles.errorText}>{errorMsg}</Text> : null}\n      </View>\n\n      <View style={styles.mapContainer}>\n        {isLoadingLocation ? (\n          <View style={styles.loadingContainer}>\n            <ActivityIndicator size=\"large\" color=\"#4CAF50\" />\n            <Text style={styles.loadingText}>Obteniendo ubicación...</Text>\n            {errorLocationMsg && (\n              <Text style={styles.errorText}>{errorLocationMsg}</Text>\n            )}\n            <TouchableOpacity\n              style={styles.retryButton}\n              onPress={() => {\n                console.log('Reintentando obtener ubicación...');\n                setIsLoadingLocation(true);\n                setErrorLocationMsg(null);\n                (async () => {\n                  try {\n                    const { status } = await Location.requestForegroundPermissionsAsync();\n                    if (status !== 'granted') {\n                      throw new Error('Permiso de ubicación denegado');\n                    }\n\n                    const location = await Location.getCurrentPositionAsync({\n                      accuracy: Location.Accuracy.Balanced,\n                    });\n\n                    console.log('Nueva ubicación obtenida:', JSON.stringify(location.coords));\n\n                    setUserLocation({\n                      latitude: location.coords.latitude,\n                      longitude: location.coords.longitude,\n                    });\n\n                    setRegion({\n                      latitude: location.coords.latitude,\n                      longitude: location.coords.longitude,\n                      latitudeDelta: 0.0922,\n                      longitudeDelta: 0.0421,\n                    });\n\n                    setIsLoadingLocation(false);\n                  } catch (error: any) {\n                    console.error('Error al reintentar obtener ubicación:', error);\n                    setErrorLocationMsg(`Error: ${error.message}`);\n                    setIsLoadingLocation(false);\n\n                    // Usar ubicación por defecto\n                    setUserLocation({\n                      latitude: 40.416775,\n                      longitude: -3.703790,\n                    });\n                  }\n                })();\n              }}\n            >\n              <Text style={styles.retryButtonText}>Reintentar</Text>\n            </TouchableOpacity>\n\n            <TouchableOpacity\n              style={[styles.retryButton, { marginTop: 10, backgroundColor: '#FFA000' }]}\n              onPress={() => {\n                console.log('Usando ubicación por defecto...');\n                setUserLocation({\n                  latitude: 40.416775, // Madrid\n                  longitude: -3.703790,\n                });\n                setRegion({\n                  latitude: 40.416775,\n                  longitude: -3.703790,\n                  latitudeDelta: 0.0922,\n                  longitudeDelta: 0.0421,\n                });\n                setIsLoadingLocation(false);\n              }}\n            >\n              <Text style={styles.retryButtonText}>Usar ubicación por defecto</Text>\n            </TouchableOpacity>\n          </View>\n        ) : (\n          <View style={{ flex: 1, width: '100%' }}>\n            {errorLocationMsg && (\n              <View style={styles.errorOverlay}>\n                <Text style={styles.errorText}>{errorLocationMsg}</Text>\n              </View>\n            )}\n            <GlobeView style={styles.map} />\n          </View>\n        )}\n      </View>\n\n      <LoadingModal visible={isLoading} currentStep={currentStep} />\n\n      <FriendSelectionModal\n        visible={showShareModal}\n        onClose={() => {\n          setShowShareModal(false);\n          // Si el usuario no quiere compartir, navegar directamente a misiones\n          if (generatedJourneyId) {\n            navigation.navigate('Missions', {\n              journeyId: generatedJourneyId,\n              challenges: []\n            });\n            setGeneratedJourneyId(null);\n          }\n        }}\n        onSelect={handleShareJourney}\n      />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5',\n  },\n  searchContainer: {\n    backgroundColor: 'white',\n    padding: 15,\n    borderBottomLeftRadius: 20,\n    borderBottomRightRadius: 20,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5,\n    zIndex: 9999,\n    position: 'relative',\n  },\n  mapContainer: {\n    flex: 1,\n    marginTop: 10,\n  },\n  map: {\n    width: '100%',\n    height: '100%',\n  },\n  input: {\n    height: 40,\n    borderColor: '#ddd',\n    borderWidth: 1,\n    borderRadius: 5,\n    marginBottom: 10,\n    paddingHorizontal: 10,\n    backgroundColor: 'white',\n  },\n  button: {\n    backgroundColor: '#4CAF50',\n    padding: 15,\n    borderRadius: 5,\n    alignItems: 'center',\n  },\n  buttonDisabled: {\n    backgroundColor: '#cccccc',\n  },\n  buttonText: {\n    color: 'white',\n    fontWeight: 'bold',\n  },\n  errorText: {\n    color: 'red',\n    marginTop: 10,\n    textAlign: 'center',\n  },\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  },\n  loadingCard: {\n    backgroundColor: 'white',\n    padding: 20,\n    borderRadius: 15,\n    alignItems: 'center',\n    width: '80%',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5,\n  },\n  loadingTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n    marginTop: 15,\n    marginBottom: 10,\n  },\n  loadingStep: {\n    fontSize: 16,\n    color: '#666',\n    textAlign: 'center',\n    marginTop: 10,\n  },\n  datePickersRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 10,\n    backgroundColor: 'white',\n    borderRadius: 8,\n    padding: 15,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 3.84,\n    elevation: 2,\n  },\n  datePickerContainer: {\n    position: 'relative',\n    zIndex: 9999,\n    backgroundColor: 'white',\n    borderRadius: 8,\n    padding: 8,\n    marginBottom: 16,\n    overflow: 'visible',\n    ...Platform.select({\n      web: {\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n      },\n      default: {\n        elevation: 2,\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.1,\n        shadowRadius: 4\n      }\n    })\n  },\n  datePickerButton: {\n    backgroundColor: '#005F9E',\n    borderRadius: 8,\n    padding: 12,\n  },\n  datePickerContent: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  datePickerText: {\n    color: 'white',\n    fontSize: 16,\n  },\n  calendarDropdown: {\n    backgroundColor: 'white',\n    borderRadius: 8,\n    padding: 15,\n    marginTop: 8,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 10,\n    elevation: 5,\n  },\n  durationText: {\n    textAlign: 'center',\n    marginBottom: 10,\n    color: '#666',\n  },\n  dateRangeContainer: {\n    backgroundColor: 'white',\n    borderRadius: 8,\n    padding: 15,\n    marginBottom: 15,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 3.84,\n    elevation: 2,\n  },\n  suggestionsList: {\n    position: 'absolute',\n    top: '100%',\n    left: 0,\n    right: 0,\n    backgroundColor: 'white',\n    borderRadius: 5,\n    maxHeight: 200,\n    zIndex: 2,\n    elevation: 5,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n  },\n  suggestionItem: {\n    padding: 15,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n  },\n  suggestionText: {\n    fontSize: 16,\n    color: '#333',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    marginTop: 10,\n    color: '#666',\n  },\n  retryButton: {\n    backgroundColor: '#4CAF50',\n    padding: 10,\n    borderRadius: 5,\n    marginTop: 10,\n  },\n  retryButtonText: {\n    color: 'white',\n    textAlign: 'center',\n    fontWeight: 'bold',\n  },\n  errorOverlay: {\n    position: 'absolute',\n    top: 10,\n    left: 10,\n    right: 10,\n    backgroundColor: 'rgba(244, 67, 54, 0.9)',\n    padding: 10,\n    borderRadius: 5,\n  },\n  progressBar: {\n    height: 8,\n    width: '100%',\n    backgroundColor: '#f0f0f0',\n    borderRadius: 10,\n    overflow: 'hidden',\n    marginTop: 20,\n    marginBottom: 10,\n  },\n  progressFill: {\n    height: '100%',\n    backgroundColor: '#4CAF50',\n    borderRadius: 10,\n  },\n});\n\nexport default MapScreen; "],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}